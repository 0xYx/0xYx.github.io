<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kapuseru</title>
    <link>https://www.yingxinsong.com/</link>
    <description>カプセル</description>
    <generator>Hugo 0.152.2 &amp; FixIt v0.4.0-alpha.3-20251128065536-6d00e42b</generator>
    <language>zh-cn</language>
    <lastBuildDate>Fri, 11 Oct 2024 16:06:08 +0800</lastBuildDate>
    <atom:link href="https://www.yingxinsong.com/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>琵琶湖✅</title>
      <link>https://www.yingxinsong.com/post/lake_biwa_fishing/</link>
      <pubDate>Fri, 11 Oct 2024 16:06:08 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/lake_biwa_fishing/</guid>
      <description>&lt;p&gt;清晨五点半，我坐在一台装满钓具的小van里，挡风玻璃的前方，依稀看到一只死去的动物尸体。&lt;/p&gt;&#xA;&lt;p&gt;“what&amp;rsquo;s that？” 我问导钓。&lt;/p&gt;&#xA;&lt;p&gt;&amp;ldquo;ラクーン&amp;rdquo; 导钓想了半天不知道英文怎么说，最后说了一句日语。&lt;/p&gt;&#xA;&lt;p&gt;我凭着仅有的日文知识，又联想了一下英文，最后想到，也许他说的是浣熊。这是我在琵琶湖钓鲈鱼的第三天了，我还是没有钓到理想中的大鱼。这一刻我的身体极度疲惫，但是心情是又期待又兴奋。&lt;/p&gt;&#xA;&lt;p&gt;时间拨回到两天前，我跟两个朋友从中国飞到日本，我们先从大阪入境，然后再乘坐JR线到达守山市，最后再从守山乘坐公交到达了琵琶湖旁边的万豪酒店，入住下来。琵琶湖位于整个日本的中央，是一个面积非常大的淡水湖，从天上往下看，就像是一个琵琶，故名琵琶湖。自古以来，琵琶湖对周边的渔民都是非常重要的，从70年代以来，鲈鱼作为一种外来物种，被放到了琵琶湖。由于没有什么天敌，所以鲈鱼可以长的非常大，到目前为止，世界上最大的鲈鱼就是在琵琶湖发现的，长达70多厘米。而我们此行的目的，就是钓一条巨大的鲈鱼。&lt;/p&gt;&#xA;&lt;p&gt;导钓是我提前联系好的，有着非常丰富的钓鱼经验的田中先生。他身材不高，皮肤黝黑，待人和善。田中先生的英文不是很好，我只能勉强用蹩脚的日语跟他交流。每次船停下来，我就问他&lt;/p&gt;&#xA;&lt;p&gt;&amp;ldquo;ここ？&amp;rdquo; 这里？&lt;/p&gt;&#xA;&lt;p&gt;&amp;ldquo;yes&amp;rdquo; 是的。&lt;/p&gt;&#xA;&lt;p&gt;都尽力了。&lt;/p&gt;&#xA;&lt;p&gt;第一天的田中先生建议我们先买好午餐，因为他计划带我们去琵琶湖的北部，离我们住的地方要远一些。今天主要用了一个水面饵，neko，还有drop shot, 水面系我们三个人中只有我尝试了，但是没有反应。neko跟 drop shot 都各有咬口，一天下来中了十几条鱼。最大的一条有30多厘米。琵琶湖的环境优美，田中先生带我们去的几个地方，都有着非常漂亮的风景。印象最深的是最北边的一个岛屿，水清澈见底，岛上似乎有成千上万只鸟在树上飞起落下，真的是仙境一样的地方。&lt;/p&gt;&#xA;&lt;p&gt;在操作方法上，drop shot主要依靠抛到结构处，然后从远端用很慢的动作逐渐收回，动作越慢越好。当遇到结构处时，还可以停一下，比如3-5s，让鱼放下警惕，放心咬饵。田中先生对饵的护理非常的精细，不但给面条虫加了胶圈，还在插铅处涂上胶水，避免插铅损伤饵或者被甩出去。跟同伴交流，他们都觉得，我们之前使用假饵还是太浪费了。&lt;/p&gt;&#xA;&lt;p&gt;第二天，时间相对来说要宽裕一些，我们计划在南湖寻找大鱼，我没想到，这一天是如此的艰难。首先第一个问题是浪大，另外我的运气也欠缺了一点。这一天主要是使用自由钓组，这也是我第一次使用这种钓组。田中先生首先找到饵鱼群/有结构的地方，然后让我们对着这个方向抛投，举例大概有20米左右。当饵入水之后，我需要等到饵完全沉底。然后用非常慢的手法逐渐把饵往回拖，当遇到障碍的时候，等待。接下来就是关键点，如果感受到了鱼的咬口，则需要打开线杯，让线5s，大力刺鱼。&lt;/p&gt;&#xA;&lt;p&gt;上午同伴就给我们开了一个好头，他中了一条52cm的大鱼，然后，上午就结束了。田中先生中间带着我们去了一些小鱼点，我钓到两条小鱼，但是由于我们更希望钓到大鱼，于是就又回到了早上同伴中鱼的点。刚回去没多久，同伴又中了一条接近50cm的大鱼，这让我们都很兴奋，然后下午就结束了，一口没有。&lt;/p&gt;&#xA;&lt;p&gt;原计划两天的钓行也结束了。&lt;/p&gt;&#xA;&lt;p&gt;我们回到了昨天去吃猪排饭的地方，我有点不甘心，所以打算自己一个人去渔具店逛一逛，也想碰碰运气，看看有没有可能找到第三天的导钓。因为琵琶湖的导钓都需要提前预约，所以我真的不报什么期望。&lt;/p&gt;&#xA;&lt;p&gt;酒店附近就有一个渔具店，是我跟同伴一起去过一次的，招牌上画着一颗黄色的椰树，店名叫 7 palms。店长是一位瘦瘦高高的，看起来就像是一个非常pro的钓手。我在店里找到了不少有意思的小配件，但是其中一个我看不懂怎么用，于是我找他咨询了一下，他非常热心的给了我解答。同时他也问我是从哪里来的，于是我把这两天的行程也跟他描述了一下。&lt;/p&gt;&#xA;&lt;p&gt;&amp;ldquo;ああ、確かに難しいですね&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;&amp;ldquo;すみません I am looking for fishing guide , 30,000円 to 40,000円 ok です&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;&amp;ldquo;今?フィッシングガイドに連絡してみます。&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;随后，店长先是问了店里面的两个人，然后似乎是打了一个电话给他的朋友。这个时候我已经非常的不好意思了，但是有一些期待。山重水远，人在他乡，也从没想过能遇到热心的人帮忙。时间好像过的很漫长，我感觉很累，自己也在怀疑身体能抗住明天再钓一天吗？中间朋友也过来了，我们大概聊了一下，他们也表示支持。&lt;/p&gt;&#xA;&lt;p&gt;大概打了可能有7轮电话！真的还是要再谢谢这位店长，至今我也不知道他的名字，可惜。&lt;/p&gt;&#xA;&lt;p&gt;最终，他帮我联系到了一位年轻的导钓，和雅先生。然后我又过了难眠的一晚，清晨迷迷糊糊的坐上了车，看到了车窗前方那只死掉的浣熊。&lt;/p&gt;&#xA;&lt;p&gt;也许旅程的惊喜，往往就在安排之外吧。&lt;/p&gt;&#xA;&lt;p&gt;第三天反而是我觉得玩得最开心的一天，我跟和雅小哥聊了很多的话题，最喜欢的钓手，喜欢的日本动漫，等等等等。然后就是继续用neko在2-3米深的浅水抽停，突然，杆尖抖动，提杆确认，向上刺鱼。这手感真的不同，是一条大鱼！经过了一番搏斗，终于上岸，45cm，虽然没有朋友钓的大，但是也算破了我个人的记录，一切都，值得了。&lt;/p&gt;&#xA;&lt;p&gt;下午，和雅小哥问我，在这附近举办了一个钓鱼人的节日聚会，你想去吗？并且，你喜欢的日本钓手伊藤巧也在。于是，惊喜就是在旅程之外，我们一起去参加了节日聚会，并且，我见到了伊藤巧，看到视频里面的人从画面走出来，真是一个神奇的体验。&lt;/p&gt;&#xA;&lt;p&gt;当晚，我一个人，拖着疲惫的身躯，与净化的心灵，从守山又回到了大阪。好几天没有睡好的我，那一晚睡了一个好觉。&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>总结2023</title>
      <link>https://www.yingxinsong.com/post/2023/</link>
      <pubDate>Mon, 29 Jan 2024 15:05:46 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/2023/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;种一棵树最好的时间是十年前，其次是现在&lt;/p&gt;&#xA;&lt;p&gt;—— &lt;a href=&#34;https://zachklein.com/Sidewalk&amp;#43;Garden&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://zachklein.com/Sidewalk+Garden&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;​&#x9;现在是2024年，十年前的这个时候我决定离开北京，从一个看不到前途的公司离职，来到了深圳。我还能想起那个时候我想做什么：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;想做导演，成为宫崎骏一样的人；&lt;/li&gt;&#xA;&lt;li&gt;想创业，做一个让很多人使用的App&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;十年前的我，面对未来的前途是不确定的，好像对什么都无所谓。手里也没有什么钱，在深圳租了房子之后，剩下的钱仅仅可以再生活两个月。幸运的是时代赋予了充分的红利，阴差阳错的赶上了移动互联网的大潮，很快就找到了一份大厂的工作，开始了社畜的十年。&lt;/p&gt;&#xA;&lt;p&gt;十年后的我，没做成导演，也没有创业，还做着同一份工作。&lt;/p&gt;&#xA;&lt;p&gt;2034年的我，会怎么样呢？&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&amp;ldquo;A great man doesn’t seek to lead. He’s called to it. And he answers. And if your answer is no, you’ll still be the only thing I ever needed you to be. My son. I found my own way to it. Maybe you’ll find yours.&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;—— Dune&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;​&#x9;面对社会，对抗，冲突，不满，厌恶，妥协，理解，适应，融入，圆滑，坚持，自我，无我。&lt;/p&gt;&#xA;&lt;p&gt;​&#x9;“A great man doesn’t seek to lead?” ，我带上一个问号，只有权贵带着生来的身份，才可以等待命运的召唤。对于芸芸大众来说，只有自己才能掌握自己的命运，要放下很多的自我，对自己更狠一些，才能借助别人的力量，做成自己想做的事情。&lt;/p&gt;&#xA;&lt;p&gt;​&#x9;“世界是由草台班子搭成的”，那就应该由我来搭这个草台班子。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;富人购买资产，穷人购买负债&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;​&#x9;投资这件事情，一定要亲身经历过才能明白，经历过14年的房市暴涨，15年的股市暴跌，19年虚拟币的PPT，21年港股打新的疯狂，终于明白了资产与负债的区别。今年在这一块，最重要的事情就是把家庭的消费模式，从储蓄+按比例分配模式，改成现金流模式。未来，就是通过持续优化现金流，来实现一定的可持续性。&lt;/p&gt;&#xA;&lt;p&gt;​&#x9;另一个问题是关于资产，金融危机来了，什么是资产？23年年初的时候读了达里奥的《债务危机》，从统计的角度上来看，经济总是在泡沫与低谷之间来回震荡，如果现在是低谷，那是不是要去负债购买更多的资产？&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;刻意练习&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;​&#x9;如果要学习一项新的技能，就必须要用正确的方式刻意练习。比如，科比曾经在某一场比赛因为对方打手犯规而错失了一个绝杀球，赛后，他找到自己的训练师并要求对方在跳投的过程中打手犯规，一直练习到自己找到解决办法。&lt;/p&gt;&#xA;&lt;p&gt;​&#x9;钓鱼也是一样的道理，总想着为了钓到鱼，而忘记了基本功的重要性，反而会让你错失更多的鱼。&lt;/p&gt;&#xA;&lt;p&gt;​&#x9;这就带来一个新的问题，如果在一个全新的领域，你怎么能通过尽量少的试错，来取得最快的成长呢？对于这样的一个经验，应该怎样复制给自己的小孩呢？&lt;/p&gt;&#xA;&lt;p&gt;​&#x9;另一个问题，马上满34岁的你，未来的人生，还想学习到哪些技能？&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;国外的月亮比较圆&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;​&#x9;国外的月亮是不是真的比较圆，这就像小马过河，总是因人而异。今年原本的规划是考一个英文考试，然后拿一个语言证书，钱交了之后，本以为能学一些真正的语法，没想到培训机构都是教你怎么去考试，虽然我没有去过新东方，但是如果新东方都是教这些东西，这样的学习也真的是没啥意思。这样的心态，也导致我在这件事的执行上一再拖延，不过回想回来，如果目的原本就是要拿一个证书，那是否学到真正的语言是否重要？&lt;/p&gt;&#xA;&lt;p&gt;​&#x9;话说回来，也许国外的月亮是否比较圆不重要，自己或者是自己的小孩，能否在未来的多样化的世界中，成为世界公民，拥有选择的能力，也许才是更重要的事情。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;成人要有自己的判断力，拒绝吃饼&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;今年做好你要做的事情&lt;/li&gt;&#xA;&lt;li&gt;做事情聪明一点，有预判能力&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;</description>
    </item>
    <item>
      <title>有些事适合长话短说</title>
      <link>https://www.yingxinsong.com/post/fishing_plan_2024/</link>
      <pubDate>Thu, 19 Oct 2023 10:14:29 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/fishing_plan_2024/</guid>
      <description>&lt;p&gt;&lt;em&gt;Naval Ravikant&lt;/em&gt; 把自己的话整理到Twitter，Twitter的字数限制，有助于把思想压缩，其实我写博客也应该如此，长篇大论的废话有多少是经过深度思考的呢？&lt;/p&gt;&#xA;&lt;p&gt;我最近在思考，如何成为一个顶尖的钓手。龚磊认为这就像神枪手需要子弹，顶尖的钓手也是被大量的鱼“喂”出来的，很显然，国内并没有这样的环境。&lt;/p&gt;&#xA;&lt;p&gt;成为一个顶尖钓手，与成为一个顶尖的程序员其实并没有什么不同。虽然对于程序员来说，细分的领域很多，但是编译原理、算法这些知识总是不变的，抓住不变的，才能应万变。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;对于钓鱼来说，有哪些东西是不变的？&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;强健的体魄与耐力&lt;/li&gt;&#xA;&lt;li&gt;精准的抛投技巧&lt;/li&gt;&#xA;&lt;li&gt;钓组组装、线轮搭配、各种打结技巧&lt;/li&gt;&#xA;&lt;li&gt;了解天气、水域、气压&lt;/li&gt;&#xA;&lt;li&gt;语言能力&lt;/li&gt;&#xA;&lt;li&gt;了解鱼的习性&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;在陌生地域，花钱寻找导钓的性价比是最高的，生命有限，时间有限，机会有限。任何一个领域想要成为顶尖高手，有目的性的练习非常重要。所以我希望每年给自己一个在这个领域的目标，并有计划的练习与完成。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;问：到底应该花更多的时间在兴趣爱好上，还是应该花更多的时间在赚钱上？&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;答：人生只有一次，一边持续优化现金流，一边满足自己的兴趣爱好。只要有足够的时间，人可以成为任何想成为的人。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;2024年的目标，马来西亚钓多曼鱼，旗鱼。要实现这个目标，我欠缺什么？&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;我需要补充一根Bone Voyage H 四节杆，轮子考虑继续使用禧玛诺蒙塔尼101HG 或者是购入CQ100&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;练习远投以及精准抛投&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;多曼重量在15kg以上，旗鱼在20-40kg，我需要提升自己的力量与耐力&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;导钓&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;按照下面的列表来精进技能：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;抛投技巧 3/7：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;荡抛&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;侧抛&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;Roll piching&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;下压抛&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;远投&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;正手&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;反手&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;钓法 2/5：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;目视钓法&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;精细&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;强力精细&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;反应&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;雷强&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;打结 3/10： &lt;a href=&#34;https://zhuanlan.zhihu.com/p/373207033&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://zhuanlan.zhihu.com/p/373207033&lt;/a&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;fg结&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;血结&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;渔夫结&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;帕洛玛结&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;uni结&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;Surgeon&amp;rsquo;s Knot&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;奥尔布赖特结&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;尤卡坦结&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;GT结&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;常用钓组：&lt;/p&gt;&#xA;&lt;p&gt;软饵类 5/7：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;德州钓组&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;倒钓钓组&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;wacky钓组&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;neko钓组&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;卡罗莱纳钓组&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;无铅钓组&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;夹铅钓组&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;硬饵类 2/7：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;crank&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;Spinner bait&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;chatter bait&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;米诺&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;JIG&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;铅笔&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;之子狗&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;体能 0/3：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;连续50个俯卧撑&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;连续30分钟划船机&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;1000米 3分50秒&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;语言：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&#xA;&lt;p&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;中文&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&#xA;&lt;p&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;广东话&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li data-task=&#34;x&#34; title=&#34;已完成&#34;&gt;&#xA;&lt;p&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-solid fa-check-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;英文（不够熟练）&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li data-task=&#34; &#34; title=&#34;未完成&#34;&gt;&#xA;&lt;p&gt;&lt;i class=&#34;checkbox-icon fa-fw fa-regular fa-square&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;日文&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;行程规划：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/fishing/image-20231019193027820.png&#39; alt=&#34;image-20231019193027820&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;第一天：飞抵吉隆坡，联系导钓，前往文东镇&lt;/p&gt;&#xA;&lt;p&gt;第二天：7:30am到达钓场，上船出发钓鱼。钓到下午6:00pm结束，返回文冬镇吃晚餐和到旅馆过夜。&lt;/p&gt;&#xA;&lt;p&gt;第三天：清早6:00am离开旅馆去吃早餐，7:30am出发钓鱼至下午6:00pm结束。回旅馆休息。&lt;/p&gt;&#xA;&lt;p&gt;第四天：清早6:00am离开旅馆去吃早餐，7:30am出发钓鱼至下午6:00pm结束，然后返回吉隆坡。&lt;/p&gt;&#xA;&lt;p&gt;第五天：离开吉隆坡&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;关于长远的目标:&lt;/strong&gt;&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>大厂职级晋升指南</title>
      <link>https://www.yingxinsong.com/post/grow_up_with_pain/</link>
      <pubDate>Tue, 17 Oct 2023 00:56:37 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/grow_up_with_pain/</guid>
      <description>&lt;h2 class=&#34;heading-element&#34; id=&#34;序言&#34;&gt;&lt;span&gt;序言&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%ba%8f%e8%a8%80&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;这篇总结文档起初创建于2023年的2月1日，当时我正在准备冲刺晋升专家答辩的PPT，想到此次就算没有通过，那么也应该对职级晋升这件事情做一个总结，所以临时起意，创建了一篇文档。中文名叫《十倍的胆量》，英文名叫《growing up with pain》。看似两个毫不相关的名字实际上却反应了我那时的心境，十倍的胆量的来源其实有趣，是在一个饭局上听到一个人说他去问他的老师今年要做什么，老师说，今年你要找一个比你胆子大十倍的人，与他一起吃，一起住，一起玩。而英文名大约是反应了我当时准备PPT的心境，在痛苦中成长。没想到一语成箴，这一次答辩又没有通过，又痛了一次。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;职级晋升的流程&#34;&gt;&lt;span&gt;职级晋升的流程&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e8%81%8c%e7%ba%a7%e6%99%8b%e5%8d%87%e7%9a%84%e6%b5%81%e7%a8%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;不做详细的介绍，先简单说一下职级晋升的流程。&lt;/p&gt;&#xA;&lt;p&gt;无论是硅谷的FANG，还是国内的腾讯、阿里等一系列大厂，都独立于管理体系，建立了一套单独的职级体系。这背后的动机，是为不想参与到管理序列竞争的专业性人才有独立的晋升通道。由于职级与薪水往往挂钩，所以在这类系统的每个人，都非常重视。&lt;/p&gt;&#xA;&lt;p&gt;虽然不同公司的考核周期不同，但是通常来说，职级晋升的开始时间会在出考核结果之后，大厂为满足职级晋升条件的人进行通道评审。形式上，是候选人在一定的时间，向多位评委汇报自己的工作成绩。在这个过程中，评委会不断挑战候选人的工作内容，候选人也需要临场应对，给出评委满意的答复，所以，通道评审也往往被称为答辩。&lt;/p&gt;&#xA;&lt;p&gt;答辩季前后，公司内部的空气是完全不一样的。如果一个平常经常跟你一起吃饭的同事，突然有一天开始魂不守舍，总是一边走路，一边若有所思，那他八成在想自己的汇报材料。往往答辩前，也总有一批人挑灯夜战，甚至干到凌晨才依依不舍的下班，这八成也是在准备PPT。&lt;/p&gt;&#xA;&lt;p&gt;答辩之后，通过的人喜笑颜开，各种饭局也就组织起来了。而不通过的人，或者是郁郁寡欢，或者是“勘破红尘”，再也不想参加了，也有的人暗自摩拳擦掌，把每一次的失败当成宝贵的经验。&lt;/p&gt;&#xA;&lt;p&gt;说来有意思，这里的每一种状态我都经历过。入职以来，除了前两年在低职级序列不需要参与答辩，从第三年开始，经历了六次通道评审，总共晋升了4个职级，也就是说，平均一个职级我需要答辩1.5次，可以算是这个系统的loser了。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;不同职级的要求&#34;&gt;&lt;span&gt;不同职级的要求&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%8d%e5%90%8c%e8%81%8c%e7%ba%a7%e7%9a%84%e8%a6%81%e6%b1%82&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;国内的大厂，通常职级序列分为多个大的级别，以及若干个小级别，从软件开发的角度来说，其实就是一个人从小工，到专家的过程。以腾讯以前的职级序列举例，分为助理工程师，工程师，高级工程师，专家级工程师：&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;职级名称&lt;/th&gt;&#xA;          &lt;th&gt;职级范围&lt;/th&gt;&#xA;          &lt;th&gt;关键词&lt;/th&gt;&#xA;          &lt;th&gt;晋升是否需要答辩&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;助理工程师&lt;/td&gt;&#xA;          &lt;td&gt;T1.1-&amp;gt;T1.3&lt;/td&gt;&#xA;          &lt;td&gt;了解&lt;/td&gt;&#xA;          &lt;td&gt;❌&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;工程师&lt;/td&gt;&#xA;          &lt;td&gt;T2.1-&amp;gt;T2.3&lt;/td&gt;&#xA;          &lt;td&gt;掌握&lt;/td&gt;&#xA;          &lt;td&gt;❌&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;高级工程师&lt;/td&gt;&#xA;          &lt;td&gt;T3.1-&amp;gt;T3.3&lt;/td&gt;&#xA;          &lt;td&gt;主导&lt;/td&gt;&#xA;          &lt;td&gt;✅&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;专家级工程师&lt;/td&gt;&#xA;          &lt;td&gt;T4.1-&amp;gt;T4.3&lt;/td&gt;&#xA;          &lt;td&gt;建设&lt;/td&gt;&#xA;          &lt;td&gt;✅&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;科学家&lt;/td&gt;&#xA;          &lt;td&gt;T5&lt;/td&gt;&#xA;          &lt;td&gt;引领&lt;/td&gt;&#xA;          &lt;td&gt;✅&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;&lt;strong&gt;助理工程师&lt;/strong&gt; ：主动了解，包括对业务、系统、架构的了解。在这个阶段是职业生涯的初期，主要是一个助理的角色，工作的分配，往往是协助完成业务需求。在这个阶段打好基础是非常重要的，最好的实践就是踏实肯干，多做事情。一方面能够建立良好的个人口碑，赢得足够的信任度。另一个方面也可以更好的熟悉业务，理解业务。在这个阶段不挑活的人，后面也往往是职业发展更顺利的那一批人。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;工程师&lt;/strong&gt;：熟练掌握，不再是助理的身份，意味着需要能够独当一面，比如可以独立承担一个需求的开发，或者是小范围的技术优化，重构，技术指标的建设等。在这个阶段，最好的实践是建立自己的品牌，因为此时在项目有了更多的发言权，那么就是个人特色发挥的时候了。在一个大公司里面，个人品牌是非常重要的，你在别人眼里，是一个靠谱的人？还是技术大牛？还是一个难缠的角色？其实在每一次会议的碰撞中，一个个的来自别人的标签就出现了。这是不可避免的事情，我认为最好的实践，就是欣然接受并且竖立好自己的口碑。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;高级工程师&lt;/strong&gt;：高级的称号，需要通过了职级晋升才能获得，由于T3.1是第一个需要通道答辩才能晋升的职级，所以每年有大量的T2.3卡在这个职级，这就导致了获得这个称号非常困难。实际上，我刚入职的那一年，组里面有一半人工作了四五年都没有晋升到高级工程师的同学。当时的内部IM，点开对方头像的时候还能看到职称。看到一个人是高级工程师，都会肃然起敬。高级工程师，是能够在关键的技术决策上，主导架构，拍板的角色。所以，这个阶段的关键词是主导。&lt;/p&gt;&#xA;&lt;p&gt;进入这个阶段，除了硬实力之外，软实力也不可或缺，不少的人都会对两个词深恶痛绝，一个词是“影响力”，另一个词是“方法论”。&lt;/p&gt;&#xA;&lt;p&gt;什么是影响力？&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;影响力是指一个人、组织或者某种思想对他人或者社会产生影响的能力。这种影响可以是积极的，也可以是消极的，可以是直接的，也可以是间接的。&lt;/p&gt;&#xA;&lt;p&gt;影响力可以通过各种方式产生，例如通过领导力、专业知识、社交媒体影响力、道德权威等。一个有影响力的人或组织可以改变他人的观点、行为或决策，推动或阻止某种变化的发生。&lt;/p&gt;&#xA;&lt;p&gt;影响力的大小通常取决于多种因素，包括但不限于个人的信誉、专业能力、社交网络、公众形象、沟通技巧等。在社会和组织中，影响力是一种重要的软实力，可以用来推动变革、解决问题、领导团队等。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;什么是方法论？&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;方法论，又称方法论理论，是研究如何进行科学研究和解决问题的一种理论。它涉及到研究的设计、数据收集和分析、解释和评估结果等各个方面。方法论可以帮助研究者确定最适合他们研究目标的研究方法和技术。&lt;/p&gt;&#xA;&lt;p&gt;方法论可以分为定性方法论和定量方法论。定性方法论主要关注对个体、事件或现象的深入理解和解释，常用的方法包括观察、访谈、案例研究等。定量方法论则主要关注对大量数据的统计分析，以得出可以推广到更大群体的结论，常用的方法包括实验、调查、数学建模等。&lt;/p&gt;&#xA;&lt;p&gt;不同的学科领域可能会有各自特定的方法论，例如社会科学方法论、自然科学方法论、人文科学方法论等。这些方法论都是为了指导研究者如何更有效、更准确地进行研究。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;每次答辩结束后，总有很多人收到来自评委的评语，“在xxx事情上缺少方法论&amp;hellip;” ，“影响力需要进一步加强”，所以就会困惑，我把事情做好就行了，为什么还需要什么影响力，方法论？尤其是近几年，对大厂方法论的讨伐源源不绝。&lt;/p&gt;&#xA;&lt;p&gt;我对这两个词的说法还是偏正面的，尤其是做了评委之后，每次职级评审，横向对比不同的候选人，就会发现不同的人，影响力，以及做事的方法论确实是不一样的。与其说是要求做事有方法论，不如说是有把事情做完后总结输出的能力。影响力也是一样，比如一个框架，是否有多个业务接入，足以看出这个事情的价值。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;专家级工程师&lt;/strong&gt;：只有极少数的人能够成长为专家级工程师，客观的说，一个人要成长为专家工程师，就需要在足够多的项目能够有充分的话语权。另外，专家级工程师的关键词是建设，这也就意味着往往是从0到1设计出一个系统，这需要大量的资源，资源意味着人力，意味着时间。所以，往往能够晋升到这一个职级的人，也都是有管理职级。只有少部分研究序列的通道会从业内的影响力来衡量，比如参与H266编码标准，或者是逆向、安全等领域。&lt;/p&gt;&#xA;&lt;p&gt;这也就是说，大厂里面的专家其实是有两个维度的：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;业务专家 —— 理解当前的业务，能够在自己的领域，针对业务做开创性的设计，辅助业务成长，具备公司级的影响力&lt;/li&gt;&#xA;&lt;li&gt;行业专家 —— 引领整个行业的风向标，制定标准，组织相关峰会，具备业界的影响力&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;这两个专家并不是绝对冲突的，不过从我的观察来说，大部分的专家还是属于业务专家，要成为行业专家，仅仅做好自己的业务还不够，需要通过分享、著书等方式不断地扩大自己的业内影响力。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;如何准备答辩&#34;&gt;&lt;span&gt;如何准备答辩&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%a6%82%e4%bd%95%e5%87%86%e5%a4%87%e7%ad%94%e8%be%a9&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;功在平时&#34;&gt;&lt;span&gt;功在平时&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8a%9f%e5%9c%a8%e5%b9%b3%e6%97%b6&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;虽然大家都说功在平时，但是到底要从哪些方向做功呢？在错误的方向做无用功，其实也是不对的。我的经验，是从两个维度来下功夫：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;系统架构&lt;/li&gt;&#xA;&lt;li&gt;技术指标&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;先说技术指标，我们都看过律政剧，律师在出庭之前，最重要的就是收集证据，这样在当庭辩论的过程中，才能通过不断举证，来证明陈述的合理性，达到为原告或者被告辩护的目的。&lt;/p&gt;&#xA;&lt;p&gt;从本质上来说，大厂答辩的过程，与律师当庭辩论并没有本质上的不同。举例来说，评委可能会问：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;问：你怎么证明你这个系统的可靠性？&lt;/p&gt;&#xA;&lt;p&gt;答：因为我的系统成功率是99.999%，出错的比例只有万分之一，所以非常可靠。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;那么从这个例子就可以看出，如果没有预先准备好数据佐证，就会被扣分。就我个人的体验来说，我经常会在过技术方案的过程中挑战团队内部同学是否设计了相关的技术指标，没有数据佐证的系统是脆弱的，而且一旦发布，也不清楚对用户的影响情况，是非常有损用户体验的。&lt;/p&gt;&#xA;&lt;p&gt;再说系统架构，软件开发，总是离不开稳定、可靠、柔性、扩展性，可移植性等等关键字，不同的业务阶段，对系统的要求不一样，也许业务发展前期，要求快速上线，那么前期的重点应该放在系统的稳定性上。后面随着业务逐渐完备，也许又会产生业务复用的诉求，这个时候重点又转移到可移植性上了。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;动大于谋&#34;&gt;&lt;span&gt;动大于谋&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8a%a8%e5%a4%a7%e4%ba%8e%e8%b0%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;时间来到答辩前夕，此时该做的事情也做得差不多了，是到了总结的时候了。此时可能自己做过两三个项目，该怎么呈现到答辩材料（PPT）里呢？我的经验是，此时最好的办法是行动，而不是谋划。下面给出一系列建议操作步骤：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;确定答辩的项目&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;打开一个脑图软件，梳理所有的答辩内容&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/grow_up/image-20231017191345187.png&#39; alt=&#34;image-20231017191345187&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;开始按照一定的模版填充内容：&lt;/p&gt;&#xA;&lt;p&gt;问题：XXXX&lt;/p&gt;&#xA;&lt;p&gt;解决方案：XXXXX&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/grow_up/image-20231017191858158.png&#39; alt=&#34;image-20231017191858158&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;根据填充的内容重新梳理结构&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;为每一页内容写一段串词&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;注：通常在这个阶段，就可以发现这一页内容的合理性&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;优化内容，可以是通过表格、或者是图形的方式辅助表达&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;持续完善5、6步骤，直到完成整个汇报材料&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;这样做的好处是，可以快速的写出第一个版本的材料。这个过程就像画家作画，往往开始的时候，都是从一个轮廓开始，然后再逐渐填充，在填充的过程中，也许有新的创意，都是可以按需更改。但是如果始终停留在构思的阶段，就很容易抓不住重点。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;缜密的拷问&#34;&gt;&lt;span&gt;缜密的拷问&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%bc%9c%e5%af%86%e7%9a%84%e6%8b%b7%e9%97%ae&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;在完成第一个版本的材料后，应该对每一个内容都充分的拷问，下面是一些拷问的示例：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;你为什么做这个事情？&lt;/li&gt;&#xA;&lt;li&gt;这个项目的价值体现在哪里？&lt;/li&gt;&#xA;&lt;li&gt;了解过其他方案吗？所选的技术方案有没有在行业内做过对比？&lt;/li&gt;&#xA;&lt;li&gt;系统的稳定性怎样？有没有指标衡量？&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;这些问题，其实都是大厂职级评审过程中评委的一些通用问题。那这些问题的背后透露出一个什么特点呢？那就是评委的期望，是要候选人对自己所做的事情是先验的，但是由于候选人在做项目的时候，一没经验，二没时间，是没有办法事事都做到先验的。所以，这里的取巧的办法，就是在总结的时候把这些内容当成预先设计好的考量来说，将后验转为先验。&lt;/p&gt;&#xA;&lt;p&gt;在持续拷问过程中，可以及时的优化内容，对于一些数据佐证，也可以进行补充。由于答辩内容往往有时间的限制，所以可以把准备好的材料放到附录，或者是备注里，以备临场提问时作答。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;试炼的心流&#34;&gt;&lt;span&gt;试炼的心流&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e8%af%95%e7%82%bc%e7%9a%84%e5%bf%83%e6%b5%81&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;我建议在准备答辩的过程中，心态上不要如临大敌，而是应该平常心，把每一次答辩当成一次小模拟考试，一次自我总结的机会。同时，也应该把答辩当成一种游戏，而你的任务，就是找出这个游戏的解法，想办法去攻破每一个难题。当以游戏的方式来看待答辩，从我的经验上来说，更容易进入心流，每一次的预演，都能找出与上次不一样的地方，从而持续的改善。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;临场&#34;&gt;&lt;span&gt;临场&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%b4%e5%9c%ba&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;就算是内容准备的再充分，临场发挥的时候也总有一些突发状况，不同的人对突发状况应对方式不一样，这涉及到个人的风格，这里就不过多展开。我至今记得某一次答辩的过程中，有一位评委一直挑战我不应该应用某种技术方案，而这是一个业内通用的方案，我据理力争，但是他仍然不依不饶，最后僵持不下，十分尴尬。至今回想，我也不觉得自己有什么错，虽然那次答辩也没有通过，但是这种时候我还是会坚持自己的想法。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;对待结果的正确心态&#34;&gt;&lt;span&gt;对待结果的正确心态&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%af%b9%e5%be%85%e7%bb%93%e6%9e%9c%e7%9a%84%e6%ad%a3%e7%a1%ae%e5%bf%83%e6%80%81&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;在答辩结束后，出结果之前，无论是任何人都没有办法做到绝对的心平气和。但是，我还是建议保持平常心，说实话，如果把时间拉的足够长，通过不懈努力，我相信任何人都能努力达到自己期望的职级。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;对这个体系的看法&#34;&gt;&lt;span&gt;对这个体系的看法&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%af%b9%e8%bf%99%e4%b8%aa%e4%bd%93%e7%b3%bb%e7%9a%84%e7%9c%8b%e6%b3%95&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;OK，洋洋洒洒写了4000多字，说说我对这个体系最真实的看法吧：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;职级体系，其实本质上是管理工具&lt;/li&gt;&#xA;&lt;li&gt;晋升后的职级，脱离了一定的体系毫无用处&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;举例来说，时间来到2023年，国内的互联网大厂纷纷开始压缩职级，减少冗长的职级申报步骤，精简评审。不看武功看战功，这样就又回到了商业模式的本质，只有创造价值的人，才应该被分配最大的蛋糕。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;未来的畅想&#34;&gt;&lt;span&gt;未来的畅想&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%9c%aa%e6%9d%a5%e7%9a%84%e7%95%85%e6%83%b3&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;回到最开始，我为什么想写这篇文章呢？一方面我还是想总结一下这些年跟这个体系的爱恨情仇（我老婆就说过每次我职级不过就像霜打的茄子）。另一方面，也从自身的角度总结一定的经验。&lt;/p&gt;&#xA;&lt;p&gt;时间来到10月份，今年的第二次专家答辩，终于通过了，实在是不易，也许，我跟职级晋升这件事情的故事，也从此结束了罢，&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>移动端支付链路优化指南</title>
      <link>https://www.yingxinsong.com/post/optimize_iap_purchase/</link>
      <pubDate>Wed, 30 Nov 2022 16:38:55 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/optimize_iap_purchase/</guid>
      <description>&lt;p&gt;&lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;序&#34;&gt;&lt;span&gt;序&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%ba%8f&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;​&#x9;一个用户流失的可能性有很多种，不过我相信你最不愿意的就是他在支付、购买的过程中流失。一方面，付费的用户往往粘性更高，停留时间更长，这对产品的指标是有帮助的；而另一方面，既然用户发起了支付，那么就说明他有购买的意愿，也证明了你的想法是成功的，可商业化的。但是现实往往并不那么让人满意，实际上在整个支付的链路上，有相当一部分的用户由于各种原因流失了，本文主要阐述我是如何分析以及优化这些指标的。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;一建立支付转化漏斗&#34;&gt;&lt;span&gt;一、建立支付转化漏斗&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%80%e5%bb%ba%e7%ab%8b%e6%94%af%e4%bb%98%e8%bd%ac%e5%8c%96%e6%bc%8f%e6%96%97&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;曝光转化率&#34;&gt;&lt;span&gt;曝光转化率&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%9b%9d%e5%85%89%e8%bd%ac%e5%8c%96%e7%8e%87&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;要降低支付链路上的折损，第一步首先要清楚折损的点是从哪里来的，采用转化漏斗是一种比较常见的方式。另一个方面，也需要考虑是要度量的流程从何开始，到什么时候结束。举例来说，产品同学通常计算支付转化率，是以下面这个公式来计算的：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;支付转化率&amp;ensp;=&amp;ensp;支付成功人数/营销页面曝光数&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;但，当整个支付转化漏斗还没有建立完整的时候，是不建议以页面曝光为支付转化流程中的起点的，原因是往往营销策略决定了用户支付的意愿，从而不同营销策略带来的支付转化率相差较大，研发同学是无从优化的。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;支付转化率&#34;&gt;&lt;span&gt;支付转化率&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%94%af%e4%bb%98%e8%bd%ac%e5%8c%96%e7%8e%87&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;​&#x9;考虑到上面这个问题，可以采用下面这个公式：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;支付转化率&amp;ensp;=&amp;ensp;支付成功人次/发起支付的次数&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这样的好处在于，发起支付到支付成功，衡量的是支付能力的成功率，发起支付等于用户已经有了购买意愿，所以这就与营销策略无关了。&lt;/p&gt;&#xA;&lt;p&gt;要建立这个漏斗，可以按照下面几个步骤来实施：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;确定整个过程中涉及到的角色：以苹果支付举例，一次支付过程中涉及到用户、下单页、支付SDK、支付中台、发货后台、苹果后台这几个角色；&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;找出这几个角色之前的相互作用关系：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/05.png&#39; alt=&#34;支付作用关系图&#34;&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;根据相关关系中间的步骤建立支付转化漏斗：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/06.png&#39; alt=&#34;支付转化漏斗&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;从这个漏斗可以看出，主要的损耗在苹果支付这一步。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;二优化支付链路上的异常&#34;&gt;&lt;span&gt;二、优化支付链路上的异常&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%ba%8c%e4%bc%98%e5%8c%96%e6%94%af%e4%bb%98%e9%93%be%e8%b7%af%e4%b8%8a%e7%9a%84%e5%bc%82%e5%b8%b8&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;启动应用--预拉取苹果商品&#34;&gt;&lt;span&gt;启动应用 —— 预拉取苹果商品&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%90%af%e5%8a%a8%e5%ba%94%e7%94%a8--%e9%a2%84%e6%8b%89%e5%8f%96%e8%8b%b9%e6%9e%9c%e5%95%86%e5%93%81&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;​&#x9;支付流程的第一步并不是下单，通常是初始化支付SDK，或者是跟苹果拉取商品信息。如果等到支付时再来做，用户可能需要等待更长的时间，在启动的时候就初始化支付SDK，可以更快的发起iAP支付。这背后的原因是苹果支付第一步是通过&lt;code&gt;SKProductRequests&lt;/code&gt; 去请求商品列表，但是这个过程并不像一个Http请求这么简单，背后还有较为复杂以及不透明的步骤，此处援引公司内一位专门负责iAP的同学整理的信息，步骤如下：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;根据 AppleID + AppID（由开发者证书 SeedID + 应用包名 BundleID 组成）+ ProductID 寻找内存缓存，若缓存为空，发起网络请求并建立内存缓存。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;若命中缓存，判断缓存是否过期。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;若缓存过期或没有命中缓存，则使用 AppID+ ProductID 进行物品查找。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;如果有在 Xcode 编译运行时指定使用 StoreKit Configuration File，会尝试在指定的文件中查找物品，若文件中不包含该 ProductID 相关的信息，则会直接回调 InvalidProductID。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;如果没有指定上述文件，则苹果会前往 App Store Connect 下，确认该 AppID 下是否存在该 ProductID 对应的 App 内购买项目。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;接下来，苹果需要判断当前应用是否从 App Store 下载（若是则为苹果现网包），若为 App Store 包，请求现网环境域名获取已审核物品；若为沙盒包，则过滤掉缺少关键配置（如价格，描述）等信息的无效 App 内购买项目。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;最后，苹果需要根据 AppleID 的注册区域，决定该物品应该使用的币种及本地描述信息后，对其使用 SKProduct 进行包装后返回至成功回调。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&amp;ndash;来源：&lt;a href=&#34;https://mp.weixin.qq.com/s/OVG9zCUe5yqF96zDzeMg5Q&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;公众号：生活攻城狮&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;从上面的步骤来看，如果第二步开始就能够命中缓存，那么后面的步骤就都能省略了。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;发起下单--检测非法请求&#34;&gt;&lt;span&gt;发起下单 —— 检测非法请求&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8f%91%e8%b5%b7%e4%b8%8b%e5%8d%95--%e6%a3%80%e6%b5%8b%e9%9d%9e%e6%b3%95%e8%af%b7%e6%b1%82&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;​&#x9;平均每周约有&lt;code&gt;3.46%&lt;/code&gt;的请求未能成功下单，造成这个损耗的原因，我统称它们为非法请求。非法请求的来源主要分为两类，第一类属于可以前置拦截类，汇总有下面几种类型：&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;非法请求&lt;/th&gt;&#xA;          &lt;th&gt;占比&lt;/th&gt;&#xA;          &lt;th&gt;解决办法&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;web传参数不对&lt;/td&gt;&#xA;          &lt;td&gt;未统计&lt;/td&gt;&#xA;          &lt;td&gt;有一例解决一例&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;越狱机请求&lt;/td&gt;&#xA;          &lt;td&gt;0.007%&lt;/td&gt;&#xA;          &lt;td&gt;前置判断&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;非AppStore版本&lt;/td&gt;&#xA;          &lt;td&gt;0.0035%&lt;/td&gt;&#xA;          &lt;td&gt;前置判断&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;未开启iAP支付开关&lt;/td&gt;&#xA;          &lt;td&gt;0.133%&lt;/td&gt;&#xA;          &lt;td&gt;前置给出提示，并跳转到设置页&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;对于这一类的请求，如果用户依据给出的引导提示去安装AppStroe版本或者是打开对应的开关，最终仍然是可以购买成功的。而第二类属于下单请求已经提交到支付中台，或者苹果服务，由后台返回的下单错误，汇总有：&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;失败原因&lt;/th&gt;&#xA;          &lt;th&gt;占比&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;外币支付、非中国大陆区的账号&lt;/td&gt;&#xA;          &lt;td&gt;1.63%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;第三方代充&lt;/td&gt;&#xA;          &lt;td&gt;0.025%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;命中风控打击&lt;/td&gt;&#xA;          &lt;td&gt;0.14%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;错误码&amp;quot;4-1&amp;quot; , &amp;ldquo;4_-1234&amp;rdquo;，invalid productid&lt;/td&gt;&#xA;          &lt;td&gt;0.4%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;对于这部分的非法请求，处理起来比较棘手。支付中台拦截这些请求的原因主要是处于安全的考虑，比如来自境外的信用卡黑卡，或者是利用苹果小额支付漏洞，俗称&lt;a href=&#34;https://baike.baidu.com/item/%E8%8B%B9%E6%9E%9C36%E6%8A%80%E6%9C%AF/20433641&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;苹果36技术&lt;/a&gt;来刷单。对于这部分请求，其实是应该被打击的，这部分折损可以算作固定折损，不计入优化的范围。另一部分是请求通过了支付中台，但是苹果后台返回&lt;code&gt;4_-1&lt;/code&gt; 或者是 &lt;code&gt;4_-1234&lt;/code&gt; 错误码，对于这部分的损耗，苹果给出了下列原因：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/01.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;但是事实上只有极小部分的用户命中了上述的7个问题，首先，回到第一节启动应用部分所述的7个步骤来分析，从上报数据来看，用户发起购买的的时候，当前购买环境满足下面两点&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;此时用户购买的是正确的并且已经在苹果商店上架的商品&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;此时并没有新的iAP商品在审核中&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;所以讲道理是完全不应该购买失败的，所以可疑的点就只有一种可能，用户是越狱机，或者用户使用爱思助手等第三方渠道重新签名App的安装包，苹果认为这部分的流量并不是正常的，所以报错。针对这个问题，传统的手段是通过结合ipa包本身签名是否正确来校验，这个步骤并不能完全规避这种情况，此处不展开。另一个方案是采用苹果的&lt;a href=&#34;https://developer.apple.com/documentation/devicecheck/validating_apps_that_connect_to_your_server?language=objc&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;ATTest技术&lt;/a&gt;来验证流量是否合法：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/02.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ATTest是苹果为iOS 14以上的操作系统提供的一项可以用来检测用户请求的流量是否是来自于合法的技术能力，使用ATTest时，它会关联用户的硬件信息、App信息，生成一个密钥对，然后由客户端将这个密钥发送给苹果服务器做校验，如果这个请求来自一个可信的安装包（或者说一个真实的用户），那么苹果服务器会返回给客户端一个 &lt;strong&gt;attestation object&lt;/strong&gt;，客户端再将这个回包的信息发送给自己的服务器，服务器收到这个&lt;strong&gt;attestation object&lt;/strong&gt;后，会做下面几件事情：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;解析attestation object&lt;/li&gt;&#xA;&lt;li&gt;对比解析出来的appid 跟服务器存储的是否一致&lt;/li&gt;&#xA;&lt;li&gt;验证证书的有效性&lt;/li&gt;&#xA;&lt;li&gt;验证密钥的一致性&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/03.png&#39; alt=&#34;iap&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;相比于本地校验证书，交给苹果服务器来校验安装包本身是否真实合法应该更可靠。基于这个想法，其实可以在用户发生 &lt;code&gt;4_-1&lt;/code&gt; 以及 &lt;code&gt;4_-1234&lt;/code&gt; 时去检测这部分用户是否真的是盗版包/越狱机，如果是的话，那么是否可以针对这部分用户直接采用微信支付的方式来开通对应的服务，成功率则要高的多。但是ATTest能力上线之后，真实数据显示大部分的用户并不是真正的盗版包，从下面的数据可以看出，仅有1.35%的用户是真正的&lt;code&gt;非法流量&lt;/code&gt; ，这也就是说，大部分导致这个问题的原因，应该仍是网络问题导致的。&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;日均检测数量&lt;/th&gt;&#xA;          &lt;th&gt;盗版包个数&lt;/th&gt;&#xA;          &lt;th&gt;占比&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;1.35k&lt;/td&gt;&#xA;          &lt;td&gt;26&lt;/td&gt;&#xA;          &lt;td&gt;1.35%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;苹果支付--降低异常与增加挽留措施&#34;&gt;&lt;span&gt;苹果支付 —— 降低异常与增加挽留措施&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e8%8b%b9%e6%9e%9c%e6%94%af%e4%bb%98--%e9%99%8d%e4%bd%8e%e5%bc%82%e5%b8%b8%e4%b8%8e%e5%a2%9e%e5%8a%a0%e6%8c%bd%e7%95%99%e6%8e%aa%e6%96%bd&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;在整个支付链路上，这个步骤是损耗最大的，达到57%以上，其中拆分下来又分三个步骤&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;支付错误 —— 通常是网络错误导致，苹果在境内的服务器并不稳定，支付失败概率较大&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;取消支付 —— 价格贵了、用户不想要了，为什么不可以用微信支付、支付宝支付等原因&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;杀进程 —— 由于网络的原因导致用户等待时间过长，所以用户等待不了杀进程&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/09.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;针对这部分的损耗，核心在于如何&lt;strong&gt;降低异常&lt;/strong&gt;与&lt;strong&gt;增加挽留措施&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;支付错误&#34;&gt;&lt;span&gt;支付错误&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%94%af%e4%bb%98%e9%94%99%e8%af%af&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;在以往，每一个App只能知道最外层的错误码，大部分返回信息都是&lt;code&gt;SKErrorDomain&amp;ensp;Code=0&amp;ensp;&amp;quot;发生未知错误&amp;quot;&lt;/code&gt; 根据外层错误码聚类，可以看出大部分问题属于未知错误，或者是属于网络错误导致的:&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;支付失败错误码&lt;/th&gt;&#xA;          &lt;th&gt;占比&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;0 (未知错误)&lt;/td&gt;&#xA;          &lt;td&gt;94.474%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;-1001 (网络错误-TimedOut)&lt;/td&gt;&#xA;          &lt;td&gt;3.226%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;4097 (苹果内部XPC通信异常)&lt;/td&gt;&#xA;          &lt;td&gt;1.017%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;-1005 (网络错误-NetworkConnectionLost)&lt;/td&gt;&#xA;          &lt;td&gt;0.598%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;-1009 (网络错误-NotConnectedToInternet)&lt;/td&gt;&#xA;          &lt;td&gt;0.205%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;-1200 (网络错误-SSL errors)&lt;/td&gt;&#xA;          &lt;td&gt;0.117%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;-1003 (网络错误-Cannt find host)&lt;/td&gt;&#xA;          &lt;td&gt;0.135%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;假设，未知错误也属于网络错误，那么就不由得让人萌发一个单纯又美好的愿望，是不是可以在应用本地起一个代理，劫持所有的网络流量重定向一个稳定的后台服务上，由这个后台服务作为中间人跟苹果后台交互，这样不就解决了用户直连苹果服务器经常链接失败的问题了吗？但是很可惜，苹果应该有一种机制去识别代理发出的请求，如果走代理就会支付失败。既然这条路走不通，那是否可以进一步分析错误码本身？苹果在最近几个版本，开始支持第三层错误码的提示:&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;//&amp;ensp;原错误信息&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;支付失败:&amp;ensp;error:&amp;ensp;Error&amp;ensp;Domain=SKErrorDomain&amp;ensp;Code=0&amp;ensp;&amp;#34;发生未知错误&amp;#34;&amp;ensp;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;UserInfo={NSLocalizedDescription=发生未知错误,&amp;ensp;NSUnderlyingError=0x282528150&amp;ensp;{Error&amp;ensp;Domain=ASDServerErrorDomain&amp;ensp;Code=3532&amp;ensp;&amp;#34;您目前已订阅此项目&amp;#34;&amp;ensp;UserInfo={NSLocalizedDescription=您目前已订阅此项目}}}，&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;//&amp;ensp;内层错误码&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;errorInfo:&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;resultCode&amp;ensp;=&amp;ensp;4;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;resultInnerCode&amp;ensp;=&amp;ensp;0;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;resultMsg&amp;ensp;=&amp;ensp;&amp;#34;Error&amp;ensp;Domain=SKErrorDomain&amp;ensp;Code=0&amp;ensp;\&amp;#34;\U53d1\U751f\U672a\U77e5\U9519\U8bef\&amp;#34;&amp;ensp;UserInfo={NSLocalizedDescription=\U53d1\U751f\U672a\U77e5\U9519\U8bef,&amp;ensp;NSUnderlyingError=0x282528150&amp;ensp;{Error&amp;ensp;Domain=ASDServerErrorDomain&amp;ensp;Code=3532&amp;ensp;\&amp;#34;\U60a8\U76ee\U524d\U5df2\U8ba2\U9605\U6b64\U9879\U76ee\&amp;#34;&amp;ensp;UserInfo={NSLocalizedDescription=\U60a8\U76ee\U524d\U5df2\U8ba2\U9605\U6b64\U9879\U76ee}}}&amp;#34;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;workingStep&amp;ensp;=&amp;ensp;6;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;所以iAP支付类的错误，我们就可以获取到&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;resultCode = 4&lt;/li&gt;&#xA;&lt;li&gt;resultInnerCode = 0&lt;/li&gt;&#xA;&lt;li&gt;resultMsg-&amp;gt;NSErrorDomainCode = 3532&lt;/li&gt;&#xA;&lt;li&gt;NSLocalizedDescription = (您目前已订阅此项目)\U60a8\U76ee\U524d\U5df2\U8ba2\U9605\U6b64\U9879\U76ee&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;相比之前的&lt;code&gt;发生未知错误&lt;/code&gt;，更清晰了，那么针对这部分的错误码，我们可以进一步的给出用户对应的提示，或者给出苹果官方的解决方案：&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;&lt;strong&gt;code&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;错误原因&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;解决方案&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;占比&lt;/strong&gt;&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;0&lt;/td&gt;&#xA;          &lt;td&gt;未知错误&lt;/td&gt;&#xA;          &lt;td&gt;无法解决&lt;/td&gt;&#xA;          &lt;td&gt;74.521%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3029&lt;/td&gt;&#xA;          &lt;td&gt;需要付款信息&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://support.apple.com/en-us/HT201266&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://support.apple.com/en-us/HT201266&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;20.128%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2024&lt;/td&gt;&#xA;          &lt;td&gt;需要验证&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://macreports.com/app-store-says-verification-required-for-free-apps-how-to-fix/&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://macreports.com/app-store-says-verification-required-for-free-apps-how-to-fix/&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;2.648%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2005&lt;/td&gt;&#xA;          &lt;td&gt;无法完成付款&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://support.apple.com/en-us/HT203005&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://support.apple.com/en-us/HT203005&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;2.537%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3014&lt;/td&gt;&#xA;          &lt;td&gt;商店信用余额不足&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://discussions.apple.com/thread/251238288&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://discussions.apple.com/thread/251238288&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.066%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2022&lt;/td&gt;&#xA;          &lt;td&gt;你以前某次购物时存在帐单问题。&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://discussions.apple.com/thread/7828949&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://discussions.apple.com/thread/7828949&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.048%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3038&lt;/td&gt;&#xA;          &lt;td&gt;Apple 媒体服务条款与条件已更改。&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://discussions.apple.com/thread/253556197&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://discussions.apple.com/thread/253556197&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.046%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3750&lt;/td&gt;&#xA;          &lt;td&gt;Add a new payment method&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://support.apple.com/en-us/HT201266&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://support.apple.com/en-us/HT201266&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.009%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3751&lt;/td&gt;&#xA;          &lt;td&gt;新增付款方式&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://support.apple.com/en-us/HT201266&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://support.apple.com/en-us/HT201266&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.002%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2006&lt;/td&gt;&#xA;          &lt;td&gt;付款方式被拒&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://support.apple.com/en-us/HT203005&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://support.apple.com/en-us/HT203005&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.001%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3705&lt;/td&gt;&#xA;          &lt;td&gt;要求准许&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://macreports.com/app-store-says-verification-required-for-free-apps-how-to-fix/&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://macreports.com/app-store-says-verification-required-for-free-apps-how-to-fix/&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.001%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2011&lt;/td&gt;&#xA;          &lt;td&gt;Payment information is required to continue purchasing.&lt;/td&gt;&#xA;          &lt;td&gt;&lt;a href=&#34;https://support.apple.com/en-us/HT201266&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;https://support.apple.com/en-us/HT201266&lt;/a&gt;&lt;/td&gt;&#xA;          &lt;td&gt;0.000%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;不过，从上文仍然可以看出，未知错误，也就是网络原因导致的错误占比仍然是最大的，这仍需要苹果进一步的优化自己的服务器才能解决了。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;既然此路不通，那就另寻他法&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;苹果在22年更新的Apple Review Guide Lines 增加了一条&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;**3.1.3 其他购买方式：**以下 App 可以使用 App 内购买项目以外的购买方式。除非符合 3.1.3(a) 中规定的情况，否则此部分中的 App 不得在 App 内鼓励用户使用 App 内购买项目以外的购买方式。开发者可以在 App 之外向其用户群发送宣传材料，以介绍 App 内购买项目以外的购买方式。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/cn/app-store/review/guidelines/#other-purchase-methods&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;Apple Review Guide Lines 3.2.1&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;在App外部提供购买方式的渠道有下面几种，下面说一下这几种方式的利弊&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;邮件，国内不常用，国内大部分用户也没有绑定邮箱&lt;/li&gt;&#xA;&lt;li&gt;短信，需要用户绑定手机号，并且发短信有一些成本，单条短信成本在2分-1毛之间&lt;/li&gt;&#xA;&lt;li&gt;微信/QQ 公众号，需要用户关注，并且登录态绑定&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;取消支付&#34;&gt;&lt;span&gt;取消支付&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8f%96%e6%b6%88%e6%94%af%e4%bb%98&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;通常针对取消支付的都会采用一个弹窗询问用户是否真正要取消，这个弹窗的效果通常一般，转化率也比较低。有部分的App如抖音，采用了短信的方式推送端外支付方式，这样则是把取消支付认为是支付异常的一部分。另一种是类似于曹操专车，会在用户取消的时候询问用户为什么取消，通过收集用户的反馈来不断改善用户体验。我目前采用的是第二种方式，也确实从中收集到一些问题，用户的主要反馈分布如下：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/10.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;从用户的反馈，也可以看出一些优化的方法，比如提供折扣优惠，或者支持第三方的支付渠道。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;杀进程&#34;&gt;&lt;span&gt;杀进程&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%9d%80%e8%bf%9b%e7%a8%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;在分析数据的过程中，最开始总有一部分缺失的数据:&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/11.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;经过分析发现，除了上面的成功、失败、取消三种状态，还有一部分会杀进程导致App没有收到底层支付SDK的回调。这背后的原因要回到几年前，刚刚设计支付体验的时候，大部分的App都会在用户发起支付的时候，拉起一个全屏的蒙层，或者是菊花图在屏幕中间转啊转，但是此时用户没有办法终止这个流程，只能等待苹果的支付回调回来，才能决定是否继续支付，还是取消。但是还是由于苹果服务器的原因，这个过程有时候会相当的长，不愿意等待的用户会尝试通过杀进程的方式来中断这个支付流程。这部分的用户占比大概有5%左右，可以说是相当多了。要优化这个，可以把全屏的阻断交互去掉。这部分的提升可以这样估算：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;提升比例&amp;ensp;=&amp;ensp;总转化率&amp;ensp;-&amp;ensp;杀进程后当日仍然购买成功用户比例&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 class=&#34;heading-element&#34; id=&#34;三增加流量&#34;&gt;&lt;span&gt;三、增加流量&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%89%e5%a2%9e%e5%8a%a0%e6%b5%81%e9%87%8f&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;要优化支付链路，降低损耗是可以增加利润，但是如果目标更高，还需要通过进一步的提升天花板，笔者之前参与的一个企业内部培训分享为这个问题提供了三种解决办法：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;客户端打法：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;卖给更多用户&lt;/strong&gt;——比如通过铺量、降价来提高口碑。如果反应到会员业务，就可以看到会有比如首充优惠，升级优惠等策略；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;卖给用户更多&lt;/strong&gt;——如通过交叉销售，精准推荐，从而挖掘潜在的需求。比如现在很多平台都提供的联合会员策略，或者是更多的增加会员的权益；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;卖给更好的用户&lt;/strong&gt;——通过细分用户群体，来采用不同的营销策略。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;市场端打法：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;走出去，扩大市场，寻找新的空间&lt;/li&gt;&#xA;&lt;li&gt;扎下去，消费下沉，比如拼多多从一二线到四五线&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;新业务：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;相关的多元化，研究上下游的商机，增加品类&lt;/li&gt;&#xA;&lt;li&gt;非相关的多元化，研究主业之外的业务&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;用户流失率&#34;&gt;&lt;span&gt;用户流失率&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%94%a8%e6%88%b7%e6%b5%81%e5%a4%b1%e7%8e%87&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;对于技术侧而言，增加流量的还是要从降低损耗开始着手。以下面这张图举例：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/07.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;图3用户点击立即开通按钮，到图4用户支付开通会员，是我们上述的支付转化。&lt;/li&gt;&#xA;&lt;li&gt;如果以图3的页面曝光为起点，到图4用户支付成功，则是通常产品同学采用的曝光转化。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;但是如果在图1加载到图2的过程中，用户退出了页面，那么这部分的损耗就统计不到了。从真实的情况来看，这部分的损耗并不低，在某些页面可以达到13%。如何提升页面打开的次数，提升曝光，也同样是增加流量的措施之一。从前文说道的曝光转化率公式也可以变形一下：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;支付成功人数 = 营销页面曝光数 * 支付转化率&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;也可以看出，提升营销页面的曝光数，也是可以提升支付成功的人数的。另外，其实通过常识我们也知道，打开页面的速度越快，用户就越不容易流失&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;As per the report, the poor performance of the website will negatively affect business goals. Therefore, as per this statement by &lt;a href=&#34;https://www.creativebloq.com/features/how-the-bbc-builds-websites-that-scale?ref=hackernoon.com&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;BBC&lt;/a&gt;, they lost around 10% of users for every additional second their website took to load. Hence, it’s advisable to leverage comprehensive JavaScript development prowess to power up your business.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://hackernoon.com/how-to-improve-website-and-rendering-speed-with-javascript-code-optimization-l4y3711&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;how-to-improve-website-and-rendering-speed-with-javascript-code-optimization&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;比如上面这一篇文章引述BBC的页面每多加载1s就会额外损失10%的用户，针对这个问题，并没有实际的准则，每一个业务应该建立自己的观测指标，比如针对会员开通相关的页面计算出的流失率如下：&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th style=&#34;text-align: left&#34;&gt;用户流失率&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: left&#34;&gt;COUNT(Android_用户流失率)&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;用户正常打开页面&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;87.436%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;用户正常打开错误&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;5.423% （主要是网络不好）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;用户流失，等待时间小于1秒&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;0.928%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;用户流失，等待时间在1 ～ 2秒&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;2.077%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;用户流失，等待时间在2 ～ 5秒&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;2.599%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;用户流失，等待时间在5 ～ 10秒&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;1.003%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;用户流失，等待时间大于10秒&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;0.535%&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;从上面的表格可以发现两点：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;等待时间与流失率在小于5s的阶段成正比，但是超过5s之后又成反比&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;如果等待时间小于1s，也许误触导致进入的用户来不及退出，而等待时间越长的用户，是真正有耐心等待的用户。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;应该减少由于网络原因导致的页面打开错误，避免用户加载失败&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;优化用户流失率&#34;&gt;&lt;span&gt;优化用户流失率&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bc%98%e5%8c%96%e7%94%a8%e6%88%b7%e6%b5%81%e5%a4%b1%e7%8e%87&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;我所在的App的会员开通页、活动页面等目前主要技术栈仍以Web为主，Web页面的打开表现，依赖于客户端、页面、服务器三个角色互相配合。所以在优化上，我们也针对性的分析解决每一个影响页面打开速度的问题：&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;角色&lt;/th&gt;&#xA;          &lt;th&gt;影响页面打开速度的原因&lt;/th&gt;&#xA;          &lt;th&gt;优化措施&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;终端&lt;/td&gt;&#xA;          &lt;td&gt;低端机Webview的容器/内核加载时间过长，请求页面的时候网络环境差&lt;/td&gt;&#xA;          &lt;td&gt;预加载Webview容器/内核，渐进式加载、降低用户等待预期&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;页面&lt;/td&gt;&#xA;          &lt;td&gt;页面请求内容多，CSS体积大，图片过大&amp;hellip;&lt;/td&gt;&#xA;          &lt;td&gt;合并请求、提及优化、按需异步，SSR&amp;hellip;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;服务器&lt;/td&gt;&#xA;          &lt;td&gt;服务器响应速度慢&lt;/td&gt;&#xA;          &lt;td&gt;cgi拆分，降低RTT&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;但是，虽然页面跟服务器之间的交互可以优化到一个理想的状态，也可以通过预加载把Webview内核的加载耗时降低到0（安卓高低端机的性能差距大，Webview的内核加载耗时最长时就已经超过了1s），但是由于用户的网络环境复杂，无法统一，这就导致了传统的优化方案到了瓶颈，需要用其他办法才能进一步优化。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;离线包方案sonic&#34;&gt;&lt;span&gt;离线包方案：Sonic&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%a6%bb%e7%ba%bf%e5%8c%85%e6%96%b9%e6%a1%88sonic&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;换一个思路来想，如果页面是缓存好的，就无需关注用户的网络环境了，这个方案的核心在于，当页面在加载的过程中，客户端需要拦截页面的请求，如果发现当前已经有缓存页面，那么就直接给Web去渲染，提升首屏的速度。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/08.png&#39; alt=&#34;SSR&amp;#43;VasSonic流程&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;采用这个方案后，以安卓端为例，用户流失率从24.27%降低到了11.591%，提升了约12.6%，效果比较明显。针对Web的优化，除此之外还有比如Webview的缓存池优化、js压缩优化、缓存命中率优化等措施，由于篇幅的原因不在这里展开。&lt;/p&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;总结&#34;&gt;&lt;span&gt;总结&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%80%bb%e7%bb%93&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/iap/12.jpg&#39; alt=&#34;moneyball&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;2011年有一个电影叫做&lt;strong&gt;MoneyBall&lt;/strong&gt;，中文名翻译为&lt;strong&gt;点球成金&lt;/strong&gt;，讲述了由布拉德·皮特主演的比利·比恩带领的奥克兰运动家队，在认识了耶鲁大学经济学硕士彼得（上图右）后，掌握了破解职业棒球联赛的金钥匙——通过数据分析来改变球队运营的策略，用数学建模的方式，选用能得分的球员而不仅仅是球探，最终，领导球队获得了历史上最长连胜的故事。&lt;/p&gt;&#xA;&lt;p&gt;之所以分享这部电影，是想说明在整个支付链路优化的过程中，数据与指标，它们对技术优化的重要性就像电影里面破解棒球联赛的金钥匙一样重要。数据可以帮助你更深入的理解支付链路损耗背后的原因，而新定义的指标，如用户流失率，杀进程率等，可以帮助你找到新的解决办法。&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>CVPixelbuffer与Flutter外接纹理</title>
      <link>https://www.yingxinsong.com/post/cvpixelbuffer/</link>
      <pubDate>Fri, 18 Mar 2022 16:39:41 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/cvpixelbuffer/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;A Core Video pixel buffer is an image buffer that holds pixels in main memory. Applications generating frames, compressing or decompressing video, or using Core Image can all make use of Core Video pixel buffers.&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;背景&#34;&gt;&lt;span&gt;背景&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e8%83%8c%e6%99%af&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;最近遇到一个问题，如何把一个&lt;code&gt;mp4&lt;/code&gt;格式的灰度视频后处理上色后再给到Flutter渲染？&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/cvpixel/01.jpeg&#39; alt=&#34;img1&#34;&gt;&#xA;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/cvpixel/02.jpeg&#39; alt=&#34;img2&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;先来看一下整体的流程：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/cvpixel/07.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;首先无论我们使用哪一种解码器，通常来说&lt;code&gt;mp4&lt;/code&gt;格式的视频都会解码成YUV数据;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;下一步就是要把解码后的视频帧提交给后处理模块，如果后处理模块可以接受YUV数据，则可以直接提交，我这边因为使用的后处理模块不支持YUV，所以要先把YUV转成BGRA；&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;下一步后处理模块就可以开始对视频做上色处理了，这里通常会提交GPU去渲染，对于iOS来说，目前比较常用的是用openGL渲染管线，或者是Metal；&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;经过后处理模块处理后，原视频帧会被上色，最终渲染到GPU的缓冲区，一般来说，对于Native类的应用，到目前就可以正常把处理后的视频渲染上屏了；&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;但是因为我们的目标是渲染到Flutter，所以还需要把上一步拿到的纹理从GPU读出来，交给Flutter，把纹理读到CPU，我们需要使用&lt;code&gt;CVPixelBuffer&lt;/code&gt;缓存纹理数据；&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Flutter侧接入外接纹理，有两个步骤：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;在Flutter的渲染引擎光栅化之前，把我们准备好的数据提交给Flutter，这一步需要事先注册好纹理ID，这个纹理ID对应Flutter侧的TextureLayer；&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;在Flutter引擎对图层做光栅化之前，提交纹理数据，提交的纹理数据会提交给到Skia的Canvas，然后Flutter会通过统一的GraphicShell来提交渲染上屏&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/cvpixel/06.png&#39; alt=&#34;render&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;看完这个流程，如果是对这类应用熟悉一点的同学就已经可以发现两个优化点了，但是因为这并不在本文着重的范畴内，所以先给出解答&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;第二步如果直接使用YUV的数据做视频后处理可以减少一次图像处理与拷贝；&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;这里是主要是因为后处理模块暂不支持，后面可以考虑作为优化选项&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Flutter外接纹理如果支持直接GPU读纹理，则可以省去后面GPU-&amp;gt;CPU-&amp;gt;GPU的拷贝。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;对于Flutter来说，Graphic Shell是图形引擎上抽象的一层，此处设计为传纹理数据而不是直接传纹理ID，我猜测是因为底层的图形引擎是可能会变化的，今天是openGL，明天就有可能用Metal,使用CVPixelBufferCopy的方式，可以保证灵活性，但是性能确实堪忧。这部分在&lt;a href=&#34;https://cloud.tencent.com/developer/article/1687997&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;这篇文章&lt;/a&gt;也有补充阐述优化的方案&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;遇到的问题&#34;&gt;&lt;span&gt;遇到的问题&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;在实现上述方案的过程中，总不是一帆风顺，这也促成了我想写本文的原因，如果有同样的踩坑的人，希望能节省大家的一些时间&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;一-yuv-如何转bgra&#34;&gt;&lt;span&gt;一 、YUV 如何转BGRA&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%80-yuv-%e5%a6%82%e4%bd%95%e8%bd%acbgra&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;这一步虽然没有做，但是仍然值得探究一下，下面给出两个方案：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;逐像素转换，YUV在存储上有YUV420、YUV422等几种格式，我们可以根据以下公式逐像素转换到对应的Bitmap里，具体公式如下：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-mathematica&#34; data-lang=&#34;mathematica&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.164&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;2.018&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.164&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.813&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.391&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.164&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.596&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&amp;ensp;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这个方式的问题在于效率较低。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;使用SIMD等硬件加速或者是利用GPU来转换，SIMD的代表方式是使用v_Image , 利用GPU则可以使用图形管线来实现，下面给出两个参考实现：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-glsl&#34; data-lang=&#34;glsl&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;使用GLSL&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;varying&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;mediump&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;vec2&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;textureCoordinate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;uniform&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;sampler2D&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;inputImageTexture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;void&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;mediump&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;vec3&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;yuv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;mediump&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;vec3&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;rgb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;yuv&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;texture2D&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inputImageTexture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;textureCoordinate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rgb&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;vec3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;16.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;255.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;rgb&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;mat3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.164&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;1.164&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;1.164&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;mo&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.392&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;2.017&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;1.596&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.813&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;0&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;yuv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;gl_FragColor&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;vec4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rgb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objective-c&#34; data-lang=&#34;objective-c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//使用v_Image&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//gist.github.com/noppefoxwolf/26967db43fdd87662f37d2f73c863eb9&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;这个链接给出一个参考实现&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;二如何正确的创建与拷贝cvpixelbuffer&#34;&gt;&lt;span&gt;二、如何正确的创建与拷贝CVPixelBuffer&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%ba%8c%e5%a6%82%e4%bd%95%e6%ad%a3%e7%a1%ae%e7%9a%84%e5%88%9b%e5%bb%ba%e4%b8%8e%e6%8b%b7%e8%b4%9dcvpixelbuffer&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;在拿到原始的BGRA数据后，下一步是要把他转换为CVPixelBuffer，可选的方法有两个，一个是使用CVPixelBufferCreateWithBytes、另一个是CVPixelBufferCreate。在这里遇到两个问题&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;使用CVPixelBufferCreateWithBytes创建的纹理显示正确，但是后续无法映射到GPU纹理，系统报错error -6683，也无法提交到Flutter渲染&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;这个问题的原因是要创建GPU可访问的纹理，必须要设置支持IOSurface可访问。&lt;a href=&#34;https://developer.apple.com/library/archive/qa/qa1781/_index.html&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;这篇文档&lt;/a&gt;对这个问题做了初步的解释。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;Share hardware-accelerated buffer data (framebuffers and textures) across multiple processes. Manage image memory more efficiently.&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;关于IOSurface，来自官方的解释是为了更高效的管理图像处理的内存，在多个Process之间共享纹理数据与帧缓冲数据。在这里的多个Process，我认为可以理解为在CPU跟GPU之间的共享。换句话说，支持IOSurface的纹理数据，在CPU访问的时候不会发生内存拷贝，这对可以极大的提升性能。&lt;/p&gt;&#xA;&lt;p&gt;这时我们可以看一下Flutter处理外接纹理的代码：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;IOSExternalTextureGL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CreateTextureFromPixelBuffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;CVOpenGLESTextureRef&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;texture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;CVReturn&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;CVOpenGLESTextureCacheCreateTextureFromImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;kCFAllocatorDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;cache_ref_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;buffer_ref_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;GL_TEXTURE_2D&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;GL_RGBA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CVPixelBufferGetWidth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer_ref_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CVPixelBufferGetHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer_ref_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;GL_BGRA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;GL_UNSIGNED_BYTE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;texture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;noErr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;FML_LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WARNING&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;s&#34;&gt;&amp;#34;Could&amp;ensp;not&amp;ensp;create&amp;ensp;texture&amp;ensp;from&amp;ensp;pixel&amp;ensp;buffer:&amp;ensp;&amp;#34;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&amp;ensp;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;texture_ref_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;texture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里的CVOpenGLESTextureCacheCreateTextureFromImage所创建的纹理就是直接映射到我们创建的CVPixebuffer的。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;CVPixelBufferCreate创建的纹理显示不正确，出现花屏&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/cvpixel/05.png&#39; alt=&#34;5&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;使用CVPixelBufferCreate创建的纹理，需要手动获取基地址，然后把图像数据拷贝进去。在这之前，我们先设置好pixelbuffer的属性：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objective-c&#34; data-lang=&#34;objective-c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;NSDictionary&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pixelBufferAttributes&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;l&#34;&gt;@{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;__bridge&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;kCVPixelBufferPixelFormatTypeKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span class=&#34;l&#34;&gt;@(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kCVPixelFormatType_32BGRA&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;设置为BGRA格式&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;__bridge&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;kCVPixelBufferWidthKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span class=&#34;l&#34;&gt;@(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;图像宽度&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;__bridge&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;kCVPixelBufferHeightKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span class=&#34;l&#34;&gt;@(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;图像高度&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;__bridge&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;kCVPixelBufferIOSurfacePropertiesKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span class=&#34;l&#34;&gt;@{}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;IOSurface-backed&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;__bridge&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;kCVPixelBufferMetalCompatibilityKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span class=&#34;m&#34;&gt;@YES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;Metal&amp;ensp;可访问&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;cp&#34;&gt;#if&amp;ensp;TARGET_OS_IPHONE&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;__bridge&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;kCVPixelBufferOpenGLESCompatibilityKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span class=&#34;m&#34;&gt;@YES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;OpenGL可访问&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;cp&#34;&gt;#endif&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;l&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后就可以开始创建CVPixelBuffer:&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;CVPixelBufferRef&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;pixelbuffer&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;CVPixelBufferCreate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kCFAllocatorDefault&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;kCVPixelFormatType_32BGRA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;__bridge&lt;/span&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;CFDictionaryRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pixelBufferAttributes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pixelbuffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;在这一步后面，直接把原始的BGRA拷贝进去，就会出现上面的花屏问题。原因是因为iOS要求图像宽度必须能被16整除，那么如果我们传入一个1080的图像，他实际在内存中的宽度为1088。所以，我们需要按照图像可对其的方式去拷贝：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&amp;ensp;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nf&#34;&gt;copyImagePlane&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;dstLinesize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;srcLinesize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;bytewidth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dstLinesize&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;bytewidth&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;srcLinesize&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;bytewidth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;bytewidth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;dstLinesize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;srcLinesize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这样就可以解决内存拷贝时不对齐的问题。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;三如何把metal渲染的纹理转为cvpixelbuffer&#34;&gt;&lt;span&gt;三、如何把Metal渲染的纹理转为CVPixelBuffer&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%89%e5%a6%82%e4%bd%95%e6%8a%8ametal%e6%b8%b2%e6%9f%93%e7%9a%84%e7%ba%b9%e7%90%86%e8%bd%ac%e4%b8%bacvpixelbuffer&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;Metal的目的之一，就是减少图形渲染管线在CPU的开销，并且能够在一次绘制指令提交尽可能多的任务。关于Metal的详细介绍可以查阅&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/Miscellaneous/Conceptual/MetalProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40014221-CH1-SW1&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;官方文档&lt;/a&gt;，此处并不赘述，下图给出Metal的渲染流水：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/cvpixel/03.png&#39; alt=&#34;3&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;由于我使用的后处理引擎是基于Metal实现的，所以这里就需要提取Metal纹理中的数据。通常来说，我们只需要把数据从GPU转移到CPU就可以了，此处可以考虑使用下面这个接口来做&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objective-c&#34; data-lang=&#34;objective-c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*!&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;&amp;ensp;@method&amp;ensp;getBytes:bytesPerRow:fromRegion:mipmapLevel:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;&amp;ensp;@abstract&amp;ensp;Convenience&amp;ensp;for&amp;ensp;getBytes:bytesPerRow:bytesPerImage:fromRegion:mipmapLevel:slice:&amp;ensp;that&amp;ensp;doesn&amp;#39;t&amp;ensp;require&amp;ensp;slice&amp;ensp;related&amp;ensp;arguments&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;&amp;ensp;*/&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getBytes:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;pixelBytes&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nf&#34;&gt;bytesPerRow:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSUInteger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;bytesPerRow&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nf&#34;&gt;fromRegion:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MTLRegion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;region&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nf&#34;&gt;mipmapLevel:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSUInteger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;但是这里却不建议这么做，原因在于Metal在处理纹理数据的时候，为了性能以及带宽的优化，对纹理数据做了压缩，当用这个接口提取纹理数据时到内存中时，需要先把纹理做一次解压缩。解决办法有下面两个：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;把数据渲染到 MTLBuffer ，这样就可以直接通过 MTLBuffer的 contents 接口直接访问纹理数据了。MTLBuffer并不关心具体存储数据的类型与内容，只关注是数据的长度。&lt;/li&gt;&#xA;&lt;li&gt;设置 &lt;code&gt;allowGPUOptimizedContents&lt;/code&gt;属性为&lt;code&gt;&amp;ensp;NO&lt;/code&gt;，顾名思义，等于说为了CPU的访问友好，而舍弃GPU的性能。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;我使用了方案一之后，性能确实有所提升，但是数据却无法对其，始终有花屏，最后这个问题由于无法定位，舍弃了这个方案。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/cvpixel/04.png&#39; alt=&#34;4&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;四使用-gpuimagerawdataoutput-做后处理&#34;&gt;&lt;span&gt;四、使用 GPUImageRawDataOutput 做后处理&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%9b%9b%e4%bd%bf%e7%94%a8-gpuimagerawdataoutput-%e5%81%9a%e5%90%8e%e5%a4%84%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;思考一下，我们的目标是给灰度视频上色，支持自定义滤镜的GPUIMage也是一个选择。在花了比较多时间都无法解决上面的问题后，我尝试重新实现了一下这个滤镜，glsl的代码不难，这里不给出实现了。我们的重点在于拿出GPUImage渲染的纹理数据提交给Flutter渲染。在这里我们使用GPUImageRawDataOutput来实现：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objective-c&#34; data-lang=&#34;objective-c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;传入原始的BGRA数据&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUImageRawDataInput&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUImageRawDataInput&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nl&#34;&gt;initWithBytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nl&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CGSizeMake&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nl&#34;&gt;pixelFormat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUPixelFormatBGRA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;创建滤镜&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ColorFillter&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ColorFillter&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blackColor&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUVector3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.71&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;0.49&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;0.61&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;whiteColor&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUVector3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.56&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;0.56&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mf&#34;&gt;0.69&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nl&#34;&gt;addTarget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;创建BGRA输出&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUImageRawDataOutput&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUImageRawDataOutput&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nl&#34;&gt;initWithImageSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CGSizeMake&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;nl&#34;&gt;resultsInBGRAFormat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;YES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&amp;ensp;&lt;span class=&#34;nl&#34;&gt;addTarget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;useNextFrameForImageCapture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;开始渲染&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;processData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;lockFramebufferForReading&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;读取创建的CVPixelBuffer基地址&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8_t&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dstBuffer&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8_t&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CVPixelBufferGetBaseAddress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pixelbuffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&amp;ensp;拷贝进去&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dstBuffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rawBytesForImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bytesPerRowInOutput&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;unlockFramebufferAfterReading&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;总结&#34;&gt;&lt;span&gt;总结&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%80%bb%e7%bb%93&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;原本想着只是一个简简单单的需求，但是却没有想到在图像在CPU-GPU之间拷贝的过程中遇到了不少问题，在问题的解决上，一方面建议多了解系统底层实现与原理，另一方面也要对图像格式，音视频处理更加熟悉。&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>2021年度总结</title>
      <link>https://www.yingxinsong.com/post/what-i-learned-from-2021/</link>
      <pubDate>Wed, 22 Dec 2021 16:19:08 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/what-i-learned-from-2021/</guid>
      <description>&lt;h3 class=&#34;heading-element&#34; id=&#34;如何做年终总结&#34;&gt;&lt;span&gt;如何做年终总结&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%a6%82%e4%bd%95%e5%81%9a%e5%b9%b4%e7%bb%88%e6%80%bb%e7%bb%93&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;最近几年特别流行年度盘点，音乐类的App会总结你听了多少歌，银行类的App会总结你收入支出多少，最牛的是本地生活类的App，会总结你点了多少次外卖。&#xA;个人行为越来越呈现数据化，人们也越来越在意自己的数字化形象。只要想一想就知道了，你到底花了多少时间在网络上？&#xA;还有一个短视频的流行与爆发，15s的视频彻底打碎人们的时间。&#xA;实际上这篇年度总结我也会打算用这种形式来写，也许每一句都会换一行。&#xA;也许更加容易接受。&#xA;也更加容易断章取义。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;你没有晋升&#34;&gt;&lt;span&gt;你没有晋升&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bd%a0%e6%b2%a1%e6%9c%89%e6%99%8b%e5%8d%87&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;是的，今年的你相比去年，无论是专业职级还是管理职级都保持平稳。&#xA;俗话说稳中有进，那也是稳字当头，所以，恭喜你！&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;别人口中的人生巅峰&#34;&gt;&lt;span&gt;别人口中的人生巅峰&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%88%ab%e4%ba%ba%e5%8f%a3%e4%b8%ad%e7%9a%84%e4%ba%ba%e7%94%9f%e5%b7%85%e5%b3%b0&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;一位培训老师说，一个男人的人生巅峰时刻是有车子，房子，孩子。&#xA;这一年，你都有了。&#xA;希望你不要满足，要知道人生就是一场修炼。&#xA;要记得你曾经立下的Flag, 永不退休。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;你转岗了&#34;&gt;&lt;span&gt;你转岗了&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bd%a0%e8%bd%ac%e5%b2%97%e4%ba%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;你的业务方向发生了变化，业务挑战与范围变小了。&#xA;你的技术方向发生了变化，从移动客户端+pc变成了移动客户端+Web。&#xA;你的团队组成发生了变化，居然全是骨干，要注意梯队。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;你搭建了个人域名的博客&#34;&gt;&lt;span&gt;你搭建了个人域名的博客&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bd%a0%e6%90%ad%e5%bb%ba%e4%ba%86%e4%b8%aa%e4%ba%ba%e5%9f%9f%e5%90%8d%e7%9a%84%e5%8d%9a%e5%ae%a2&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;在这个视频化的时代，说实话不知道为什么你要赶这个复古的潮流。&#xA;但是既然做了，希望你能坚持。&#xA;顺便祭奠过去那么多年不记得维护的各种博客们。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;也许你更了解自己&#34;&gt;&lt;span&gt;也许你更了解自己&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b9%9f%e8%ae%b8%e4%bd%a0%e6%9b%b4%e4%ba%86%e8%a7%a3%e8%87%aa%e5%b7%b1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;今年的你花了更多时间思考人与人之间的关系，于此同时你也更了解自己要什么。希望懂得顺势而为的你，可以获得内心的平静。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;你开始健身了&#34;&gt;&lt;span&gt;你开始健身了&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bd%a0%e5%bc%80%e5%a7%8b%e5%81%a5%e8%ba%ab%e4%ba%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;以前最不喜欢去健身房的你，今年选择跟健身教练练习了两个月。也许，中年男人的标志就是开始健身吧。&#xA;既然开始了，就做到最好吧！&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;你感觉朋友变少了&#34;&gt;&lt;span&gt;你感觉朋友变少了&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bd%a0%e6%84%9f%e8%a7%89%e6%9c%8b%e5%8f%8b%e5%8f%98%e5%b0%91%e4%ba%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;是的，也许是你的性格问题，身边的朋友好像越来越少了。他们都去哪里忙了呢？&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;你认为自己需要更加掌握独立开发的能力&#34;&gt;&lt;span&gt;你认为自己需要更加掌握独立开发的能力&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bd%a0%e8%ae%a4%e4%b8%ba%e8%87%aa%e5%b7%b1%e9%9c%80%e8%a6%81%e6%9b%b4%e5%8a%a0%e6%8e%8c%e6%8f%a1%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e7%9a%84%e8%83%bd%e5%8a%9b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;如果你不能搞定每一个环节，那么凭什么认为自己是一个专家呢？志在成为专家的你，未来要做出更多自己的作品。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;本年度最佳书籍&#34;&gt;&lt;span&gt;本年度最佳书籍&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%9c%ac%e5%b9%b4%e5%ba%a6%e6%9c%80%e4%bd%b3%e4%b9%a6%e7%b1%8d&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;《游戏引擎架构》当之无愧，通过这本书你学习到游戏开发的方方面面，虽然你并不会变成一个个游戏程序员，但是这本书也给你带来极大的启发。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;你学到了什么&#34;&gt;&lt;span&gt;你学到了什么？&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bd%a0%e5%ad%a6%e5%88%b0%e4%ba%86%e4%bb%80%e4%b9%88&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;你仍然没有办法一次把事情就做对了，所以，只能保持热情的不断投入到新的挫折中去，然后再里面体验跟成长。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;对明年有什么期许&#34;&gt;&lt;span&gt;对明年有什么期许？&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%af%b9%e6%98%8e%e5%b9%b4%e6%9c%89%e4%bb%80%e4%b9%88%e6%9c%9f%e8%ae%b8&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;做好自己&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>直播中台搭建指南</title>
      <link>https://www.yingxinsong.com/post/build_live_center/</link>
      <pubDate>Thu, 02 Dec 2021 17:22:23 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/build_live_center/</guid>
      <description>&lt;h3 class=&#34;heading-element&#34; id=&#34;前言&#34;&gt;&lt;span&gt;前言&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%89%8d%e8%a8%80&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;自从头条搭上短视频这条快车道，做出了抖音这款风靡全世界的现象级产品。人们不禁都在想，他们到底用了什么技术？为什么头条能成功？其中不乏有神化创始人的，也有真的去探究背后的技术的。我身为所谓”竞争对手“公司的一份子，也不免常常被安利。其中听得最多的就是&amp;quot;中台&amp;quot;二字。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;什么是中台&#34;&gt;&lt;span&gt;什么是中台&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%bb%80%e4%b9%88%e6%98%af%e4%b8%ad%e5%8f%b0&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;如果让我来回答这个问题，我觉得其实根本没有什么中台。所谓的中台概念，也只是软件开发过程中为了提速软件开发效率的产物之一，组件化，微服务等等概念，其目的都是为了减少软件开发过程中的重复劳动，降低试错成本。笔者大概在2013年的时候，就有接触过一篇很有意思的文章:&lt;a href=&#34;https://gist.github.com/chitchcock/1281611&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;Stevey&amp;rsquo;s Google Platforms Rant&lt;/a&gt;。作者喷了一大堆亚马逊的抉择是如何如何差，Google是如何如何好。到最后却反过来讲了亚马逊的平台做的如何好，以及杰夫贝佐斯竟然可以在软件领域也有先知卓见，搭建了亚马逊的平台。里面也有一些对微软，苹果的评价，相当有趣。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;搭建直播中台&#34;&gt;&lt;span&gt;搭建直播中台&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%90%ad%e5%bb%ba%e7%9b%b4%e6%92%ad%e4%b8%ad%e5%8f%b0&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;虽然我并不认同这个概念，不过大概从19年底开始，部门内部的研发就开始出现各种搭建中台的声音，到现在也是不绝于耳。无论是什么业务，不管能不能真正的复用，先命名为XX中台，占个坑位。彼时我刚好转型独立负责一个产品的客户端开发，所以我也不能免俗，决定从负责的直播业务着手，搭建一款直播中台。&#xA;直播中台的目标，主要有两个：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;吃自己的狗粮&lt;/li&gt;&#xA;&lt;li&gt;支撑多个产品线&#xA;下面我从将从我的实践与我的反思两个方面来总结这部分的工作。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;直播中台实践--基础架构&#34;&gt;&lt;span&gt;直播中台实践 &amp;ndash; 基础架构&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%9b%b4%e6%92%ad%e4%b8%ad%e5%8f%b0%e5%ae%9e%e8%b7%b5--%e5%9f%ba%e7%a1%80%e6%9e%b6%e6%9e%84&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;首先放出整体的架构图：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/livecenter/1.png&#39; alt=&#34;直播中台架构&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;为了整体的业务尽可能的达到可复用性，首先我将整体的业务划分为五层，每一层组件与上层组件之间呈现单项依赖关系，这样做的好处就是可以做到最大程度的解耦。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;基础服务层&#34;&gt;&lt;span&gt;基础服务层&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%9f%ba%e7%a1%80%e6%9c%8d%e5%8a%a1%e5%b1%82&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;基础服务层分为两部分，与直播能力有关的如推拉流的SDK，美颜，伴奏处理等能力，可以抽象成跨平台的中间件，这部分的能力虽然与业务无关，但是最好还是在这上面封装一层抽象层。方便后续替换SDK。另外，在处理SDK的数据层面上，也最好使用原始数据。更理想一点，可以搭建一套自己的渲染流程。&#xA;这里需要注意的点，主要是需要处理好原始数据的兼容性。比如yuv数据在安卓机器上会存在按16位对其的问题。在对耳返的处理上，安卓也需要处理好硬件耳返与软件耳返的能力等。这些能力通常来说并不属于推拉流SDK，或者是美颜相关的业务。但是却可以做成基础能力。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;业务服务层&#34;&gt;&lt;span&gt;业务服务层&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%9a%e5%8a%a1%e6%9c%8d%e5%8a%a1%e5%b1%82&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;业务服务层，是对直播间状态机的抽象。粗略划分有下面几类：&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;分类&lt;/th&gt;&#xA;          &lt;th&gt;服务&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;基础服务&lt;/td&gt;&#xA;          &lt;td&gt;进房流程、心跳、推拉流、美颜、IM信令、最小化、生命周期&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;基础业务服务&lt;/td&gt;&#xA;          &lt;td&gt;连麦、PK、清晰度切换 等基础玩法&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;扩展业务服务&lt;/td&gt;&#xA;          &lt;td&gt;红包、官方房间 等业务玩法&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;直播业务的特点在于，相比于传统页面的CURD，直播业务的玩法往往有相当多的状态同步。业务服务层仅包含与业务后台状态同步相关的实现，记录业务状态的数据。原则上来说，这一层非常考验研发同学的抽象能力。举例来说，一个连麦业务与后台交互的状态可能有以下这些：&lt;/p&gt;&#xA;&lt;p&gt;连麦状态&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;未连麦&lt;/li&gt;&#xA;&lt;li&gt;等待队列中&lt;/li&gt;&#xA;&lt;li&gt;正在麦上，状态正常&lt;/li&gt;&#xA;&lt;li&gt;已同意上麦&lt;/li&gt;&#xA;&lt;li&gt;静音&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;对于后台业务来说，这几个状态位就已经足够了，因为后台只处理纯数据的轮转。一种办法就是我们如实的去实现这五个接口，依赖于使用组件的同学来消化五个接口的意义，由于前端的业务往往与UI交互相关，那么这部分的工作就不可避免的与UI代码互相耦合了。业务服务层的意义，就是要消化这部分的状态轮转，并提供可读性好的接口。上面的五个状态，可以根据业务需求转化出用户的操作，与后台的响应两部分接口。在协议上可以分为：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;Action:&#xA;//&amp;ensp;用户&#xA;requestConnect();&#xA;cancelConnect();&#xA;stopConnect();&#xA;&#xA;//主播&#xA;acceptConncetRequest();&#xA;refuseConncetRequest();&#xA;muteUser();&#xA;kickoutUser();&#xA;&#xA;Listener:&#xA;//&amp;ensp;处理状态同步与一些异常事件&#xA;onUserConnectStatusUpdate(Status&amp;ensp;status);&#xA;onConncetTimeOut();&#xA;...&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;这样的抽象的好处有很多，如从纯状态的流程变为业务流程，业务可读性更好。统一管理了相关状态，可以有效避免状态同步到多个内存导致UI界面混乱的问题等。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;ui组件层&#34;&gt;&lt;span&gt;UI组件层&lt;/span&gt;&#xA;  &lt;a href=&#34;#ui%e7%bb%84%e4%bb%b6%e5%b1%82&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;UI组件采用MVVM中的 ViewModel 与 View 的思想。其中View作为纯粹的UI组件，只处理UI元素的布局。而实际的业务逻辑代码，则是交给ViewModel来实现。需要注意的是，ViewModel将直接使用业务服务层的数据，并把状态同步后的数据同步给View展示。起到了承上启下的作用。为了实现到纯粹的UI组件，ViewModel跟View之间的数据更新可以采用反射的方式来实现。比如iOS中可以使用ReactCocoa, 而安卓则可以使用 DataBinding 等技术。这一层要求整个数据的流动必须是单向流动的，并且都由业务服务层提供的接口来驱动&#xA;如下图：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/livecenter/4.png&#39; alt=&#34;数据流动&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;这样做有两点收益：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;纯UI的View因为不含任何业务逻辑，所以具备最大的可复用性，方便拆卸。&lt;/li&gt;&#xA;&lt;li&gt;可以针对相同UI实现不同的ViewModel来实现不同的业务逻辑，这样做的好处在于当有不同的房间类型的时候，方便替换数据源。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;业务装配层&#34;&gt;&lt;span&gt;业务装配层&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%9a%e5%8a%a1%e8%a3%85%e9%85%8d%e5%b1%82&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;现在我们有了业务逻辑，有了UI，那么就可以针对不同的业务场景把直播房间搭建起来了。一种方式是你可以写重复的代码，但这显而易见不够灵活。另一个办法则是再实现一套业务装配层。这一层包含两个功能。一个是负责把UI组件层的 ViewModel 与业务服务层的服务接口事件绑定起来，另一个则是根据业务需求来做UI上的排版布局。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/livecenter/5.png&#39; alt=&#34;业务装配&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;采用这种方式，不同的业务就可以按需加载自己的业务模块，实现到搭积木的效果了。但是实际上却不仅于此，如果我们考虑把业务模块与布局抽象成一个布局文件，类似于前端排版的css，那么我们甚至可以动态下发不同的直播间了。这个设想我们仅实现到搭建积木这一层，动态下发的能力因为后续我没有继续负责直播业务而没有继续推进。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;房间玩法&#34;&gt;&lt;span&gt;房间玩法&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%88%bf%e9%97%b4%e7%8e%a9%e6%b3%95&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;通过不同的业务逻辑搭建的不同直播间，其实也具备一定的可复用性。不过这部分其实不属于直播中台组件搭建的能力了，复用的是整个产品与视觉的设计。在某一些业务的场景也可以用到，比如手机QQ空间分为独立的App与手机QQ的结合版。那么如果这里功能完全一样，其实是可以同步的更新的。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;直播中台实践--通信机制与生命周期&#34;&gt;&lt;span&gt;直播中台实践 &amp;ndash; 通信机制与生命周期&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%9b%b4%e6%92%ad%e4%b8%ad%e5%8f%b0%e5%ae%9e%e8%b7%b5--%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6%e4%b8%8e%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;通信机制&#34;&gt;&lt;span&gt;通信机制&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%80%9a%e4%bf%a1%e6%9c%ba%e5%88%b6&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;对业务做好分层隔离之后，下一个需要解决的是模块之间的协同问题。设想在业务服务层有模块A，想要与业务模块B通信。一种方式是通过上图的数据流动的方式，数据先向上流动，然后再由具体的业务ViewModel来消化。这样虽然可以解决业务模块之间纯粹的隔离，但是如果是IM模块，或者是进房事件这种关键模块，则不适用这种场景。因此可以设计一种事件总线的机制来做分发：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/livecenter/3.png&#39; alt=&#34;事件总线&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;这样做的好处有下面几个：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;每一个模块可以根据总线事件，自行选择加载或者不加载&lt;/li&gt;&#xA;&lt;li&gt;模块之间互相没有依赖，在进房时可以并行加载，提前展示&lt;/li&gt;&#xA;&lt;li&gt;增强代码可读性，统一认识&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;但是这个机制其实也存在一定的缺陷，比如在进房成功的场景，如果所有的模块都同时做CPU集中型任务的话，那不可避免的会造成拥塞。所以理想来说还需要事件总线的派发器能够做好调度。&#xA;另一种场景是模块A跟模块B之间有强依赖，比如直播PK玩法的场景，就需要先让两个主播连麦，之后再进行PK。这个时候一般来说有两个办法：&#xA;一个是可以让连麦模块作为纯粹的模块，PK模块作为连麦的子模块，这样从逻辑上也合理，同时PK模块对外实现的接口也掩蔽了连麦模块，接口更清晰。&#xA;另一种则是通过某种路由协议来通信，由连麦模块跟PK模块之间做协议上的沟通。不过这样也带来了接口的复杂性，以及管理接口相关的问题。&#xA;所以在这种场景下，我们最终选择的是第一种方法。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;生命周期&#34;&gt;&lt;span&gt;生命周期&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;生命周期也是直播间需要考虑的问题之一，例如在用户上下滑动直播间时，我们需要对部分的UI组件或者模块做复用，来减少内存损耗，提升加载速度。这样就必须要避免重用的组件复用了上一次的状态。所以最好通过统一的生命周期事件做好处理：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/livecenter/2.png&#39; alt=&#34;生命周期&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;把所有模块统一加载，统一销毁。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;直播中台实践--收益&#34;&gt;&lt;span&gt;直播中台实践 &amp;ndash; 收益&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%9b%b4%e6%92%ad%e4%b8%ad%e5%8f%b0%e5%ae%9e%e8%b7%b5--%e6%94%b6%e7%9b%8a&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;很难说以上架构就是完美的架构，不过最终这一套架构满足了公司音视频直播的业务场景，支持了接近30个研发无障碍协同，快速迭代，接入到了公司多个前端App上。在房间模式上，通过上述架构我们快速支持了产品提出的不同直播间玩法，比如在疫情来到的2020年Club House模式爆火的时候，我们可以迅速通过这个架构搭建出一套UI完全不一样的直播间，在这一点上我还是比较满意的。于此同时，由于模块之间隔离做的不错，所以我跟团队的小伙伴们也积极探索了一些周边的优化，比如编译优化，单元测试，UI组件库，跨平台等等。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;回顾一--我的反思与我学到了什么&#34;&gt;&lt;span&gt;回顾一 &amp;ndash; 我的反思与我学到了什么？&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%9b%9e%e9%a1%be%e4%b8%80--%e6%88%91%e7%9a%84%e5%8f%8d%e6%80%9d%e4%b8%8e%e6%88%91%e5%ad%a6%e5%88%b0%e4%ba%86%e4%bb%80%e4%b9%88&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h5 class=&#34;heading-element&#34; id=&#34;胆大心细&#34;&gt;&lt;span&gt;胆大心细&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e8%83%86%e5%a4%a7%e5%bf%83%e7%bb%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;整个直播中台的搭建耗时接近一年，由于前期业务着急上线，每次大的重构都好像在给赛道上飞速跑的F1方程式赛车换轮胎一样，必须要胆大心细。但是我认为作为技术管理者，必须要有这样魄力，敢于改造，最后会发现整体的项目ROI是很高的。&lt;/p&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;改造人的认知是很困难的&#34;&gt;&lt;span&gt;改造人的认知是很困难的&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%94%b9%e9%80%a0%e4%ba%ba%e7%9a%84%e8%ae%a4%e7%9f%a5%e6%98%af%e5%be%88%e5%9b%b0%e9%9a%be%e7%9a%84&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;统一的架构需要统一的实现方式，但是同样带来的问题确一定程度上束缚了开发人员的自主性。可以说在这个地方我像是一个代码暴君，推翻了一切不不符合中台架构的实现。在最开始组内的同学对这一套架构不够了解的时候，发动了一次次的站立会议，等于说强行统一认知，就算这样，整套架构中仍有部分代码不符合规范。所以，整个中台架构的推动可以说是非常艰难。&#xA;但是反过来说，如果没有一个这样暴君的角色，那么对应的执行者一定会执行不到位。经过这一件事，我经常在想，架构师到底是一个什么样的角色呢？&lt;/p&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;选育用留&#34;&gt;&lt;span&gt;选育用留&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%80%89%e8%82%b2%e7%94%a8%e7%95%99&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;曾经我有过一个疑惑，每次我把一个我认为技术不错的候选人转给我当时的总监，他总要问：&amp;ldquo;这个人聪明不聪明？&amp;quot;。作为工程师来说，一个人聪明不聪明重要呢？还是懂各种技术知识更重要呢？从前的我一直都认为，后者更重要。&#xA;但是经过这个项目，我再回过头来看，我会认为一个人聪明，情商高，技术一般，远比精通各种技术，但是情商低，理解事情困难的人更好。这个事情并不是非常绝对的，但是在现代工程的领域，往往更加注重协作，而较少真正存在技术深度的研发工作。选择前者能够让项目推进的更顺利，事半功倍。&#xA;为什么得出这个结论呢？套用2021年底还流行的一句话 —— &amp;ldquo;不要问我是怎么知道的。&amp;rdquo;&lt;/p&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;身体是革命的本钱&#34;&gt;&lt;span&gt;身体是革命的本钱&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e8%ba%ab%e4%bd%93%e6%98%af%e9%9d%a9%e5%91%bd%e7%9a%84%e6%9c%ac%e9%92%b1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;回想过去两年，可以说是各种身体状况频发，也许是因为年到三十，人到中年。也许是因为项目发展太快，步子太大扯到蛋了。不管怎么说，有一个好身体才能有本钱做更多的事情，实现更多在技术上的想法。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;最后&#34;&gt;&lt;span&gt;最后&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%9c%80%e5%90%8e&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;这篇总结是我一直想写，但是总是因为某一些原因而没有写。搭建直播中台已经是大半年前的事情了，而今年年中因为部门调动，目前我已经不再负责这一块的业务，开始了新的征程。今天把这一段经历记录下来，结项，迈向新的开始。&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>工程师自检手册</title>
      <link>https://www.yingxinsong.com/post/hiring/</link>
      <pubDate>Thu, 30 Sep 2021 17:22:36 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/hiring/</guid>
      <description>&lt;p&gt;在这个职场中，我觉得每一个单纯的工程师都应该有一个要做与不要做的手册，每次头脑发热做事情的时候，应该拿出来自检一下。下面，就是我从很多地方吸收的&amp;quot;办公室真理&amp;quot;，当然，后面也许还会收集更多：&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;不要做&#34;&gt;&lt;span&gt;不要做&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%8d%e8%a6%81%e5%81%9a&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;1-闷头努力从不汇报&#34;&gt;&lt;span&gt;1. 闷头努力，从不汇报&lt;/span&gt;&#xA;  &lt;a href=&#34;#1-%e9%97%b7%e5%a4%b4%e5%8a%aa%e5%8a%9b%e4%bb%8e%e4%b8%8d%e6%b1%87%e6%8a%a5&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;吃力不讨好，功劳全部落入别人手里，出了问题，好吧，你来背锅&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;2-从不说不&#34;&gt;&lt;span&gt;2. 从不说不&lt;/span&gt;&#xA;  &lt;a href=&#34;#2-%e4%bb%8e%e4%b8%8d%e8%af%b4%e4%b8%8d&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;这个也可以做，那个也可以做，工期越拉越长，bug 越积越多&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;3-框架没搭就先优化&#34;&gt;&lt;span&gt;3. 框架没搭，就先优化&lt;/span&gt;&#xA;  &lt;a href=&#34;#3-%e6%a1%86%e6%9e%b6%e6%b2%a1%e6%90%ad%e5%b0%b1%e5%85%88%e4%bc%98%e5%8c%96&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;是人都会知道，一个work的版本，要比一个完美版更加重要。长点心吧，先跑通、再优化，相信我，这真是一个真理&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;4-抱怨一堆代码没写&#34;&gt;&lt;span&gt;4. 抱怨一堆，代码没写&lt;/span&gt;&#xA;  &lt;a href=&#34;#4-%e6%8a%b1%e6%80%a8%e4%b8%80%e5%a0%86%e4%bb%a3%e7%a0%81%e6%b2%a1%e5%86%99&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;总有人觉得产品需求这不合理，那不合理。老板觉得合理，你觉得有问题，你算老几？&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;5-相信框架相信银弹&#34;&gt;&lt;span&gt;5. 相信框架，相信银弹&lt;/span&gt;&#xA;  &lt;a href=&#34;#5-%e7%9b%b8%e4%bf%a1%e6%a1%86%e6%9e%b6%e7%9b%b8%e4%bf%a1%e9%93%b6%e5%bc%b9&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;引入这个框架就能解决A问题，接入那个组件可以解决B问题。结果呢？头痛医头，脚痛医脚！&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;6-眼高手低像个菜鸡&#34;&gt;&lt;span&gt;6. 眼高手低，像个菜鸡&lt;/span&gt;&#xA;  &lt;a href=&#34;#6-%e7%9c%bc%e9%ab%98%e6%89%8b%e4%bd%8e%e5%83%8f%e4%b8%aa%e8%8f%9c%e9%b8%a1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;技术需求就牛逼？业务需求就垃圾？你也就会CURD！&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;要做&#34;&gt;&lt;span&gt;要做&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e8%a6%81%e5%81%9a&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;1-勤写总结多发邮件&#34;&gt;&lt;span&gt;1. 勤写总结，多发邮件&lt;/span&gt;&#xA;  &lt;a href=&#34;#1-%e5%8b%a4%e5%86%99%e6%80%bb%e7%bb%93%e5%a4%9a%e5%8f%91%e9%82%ae%e4%bb%b6&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;就要这么干！怒刷存在感！&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;2-开会必到使命必达&#34;&gt;&lt;span&gt;2. 开会必到，使命必达&lt;/span&gt;&#xA;  &lt;a href=&#34;#2-%e5%bc%80%e4%bc%9a%e5%bf%85%e5%88%b0%e4%bd%bf%e5%91%bd%e5%bf%85%e8%be%be&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;开会没有你，那就开不下去。问题没有你，那就没有底。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;3-凌晨3点定位问题&#34;&gt;&lt;span&gt;3. 凌晨3点，定位问题&lt;/span&gt;&#xA;  &lt;a href=&#34;#3-%e5%87%8c%e6%99%a83%e7%82%b9%e5%ae%9a%e4%bd%8d%e9%97%ae%e9%a2%98&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;睡觉那是给死人的&#xA;00：30：&amp;ldquo;这个怎么刷不出来了?&amp;rdquo;&#xA;00：30：&amp;ldquo;收到，我立马看看！&amp;rdquo;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;4-干活之前先提问题&#34;&gt;&lt;span&gt;4. 干活之前，先提问题&lt;/span&gt;&#xA;  &lt;a href=&#34;#4-%e5%b9%b2%e6%b4%bb%e4%b9%8b%e5%89%8d%e5%85%88%e6%8f%90%e9%97%ae%e9%a2%98&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;确认问题的归属非常重要&#xA;&amp;ldquo;这个怎么刷不出来？客户端看看？&amp;rdquo;&#xA;&amp;ldquo;安卓iOS都刷不出来，服务端看看？&amp;rdquo;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;5-同步进度保留证据&#34;&gt;&lt;span&gt;5. 同步进度，保留证据&lt;/span&gt;&#xA;  &lt;a href=&#34;#5-%e5%90%8c%e6%ad%a5%e8%bf%9b%e5%ba%a6%e4%bf%9d%e7%95%99%e8%af%81%e6%8d%ae&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;blockquote&gt;&#xA;&lt;p&gt;因为我的问题延期了？不存在的，10天以前就同步了，当时你也同意了！&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;</description>
    </item>
    <item>
      <title>逆向Unity3D Asset Bundle</title>
      <link>https://www.yingxinsong.com/post/unity3d-decrypt/</link>
      <pubDate>Tue, 28 Sep 2021 12:36:50 +0800</pubDate>
      <guid>https://www.yingxinsong.com/post/unity3d-decrypt/</guid>
      <description>&lt;p&gt;前几个月因为项目的原因，想要看一下一个售卖3D手办的软件是怎么实现的，并且想看看有没有能力获取到里面的3D模型。拿到安装包之后，还是按照惯例直接砸壳调试分析了一下：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/1.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;结果启动之后，直接挂了。定位一下，有很明确的关于License的校验：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/2.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;打开他的lib文件看一下，从上图能看出，这个ImglyKit 跟PhotoEditorSDK 是依赖关系，因为ImglyKit开了校验，所以直接挂了。这里有意思的是他还提示你应该联系他的销售购买正版授权什么的。&#xA;老办法，用hoppers看一下加载的代码，找到加载入口，然后用logos把这一块加载的代码干掉再说：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;%hook&amp;ensp;RNPESDKImglyKit&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-&amp;ensp;(void)unlockWithLicense:(id)license&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;//&amp;ensp;实际上是这个导致的，我们让他不要调用原来的方法&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;NSLog(@&amp;#34;hook&amp;ensp;unlockWithLicense&amp;#34;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;%log;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;%end&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;处理之后果然，这里可以看到bundleid 是不一样的：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/3.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;下一步又受阻了，检测到越狱，不给调试：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/4.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;这还不是一个简单的遮罩，看起来是检查到越狱直接不给调试了。大胆猜测一下，不会有一个函数叫jailBroken吧：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/5.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;真的有，那么把他也干掉：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;%hook&amp;ensp;JailMonkey&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-&amp;ensp;(BOOL)isJailBroken&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;NSLog(@&amp;#34;hook&amp;ensp;isJailBroken&amp;#34;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;%log;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;return&amp;ensp;NO;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;%end&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;搞定，接下来就是分析他的渲染以及使用的模型：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;2021-06-17 16:58:49.674491+0800 Veve[2816:236864] -[&amp;lt;RNUnityView: 0x10fd2b9e0&amp;gt; setUnityView:&amp;lt;UnityView: 0x11d5ce960; frame = (0 0; 375 812); autoresize = W+H; layer = &amp;lt;CAMetalLayer: 0x283c3be60&amp;raquo;]&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;分析发现他渲染是用的Unity,底层是CAMetalLayer，但是这些都不重要，我的目标是搞到他渲染的模型。一期到这里的时候就卡住了，原因是我没有办法找到这个unity渲染的入口函数，只能知道他是用什么做渲染的显然是不够的。为了解决这个问题，我们可以从UnityFramework这个库着手分析看看。继续用hoppers逆向分析一下这个库看一下：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/6.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;可以看出他并没有很顺利的拿到符号，反而分析出了一堆 sub_hex 的地址一样的函数名。如果符号也没有，那下一步应该怎么走呢？这个时候我的思路还是想回到原理，看一下unity是怎么打包的。所以接下来介绍三个概念：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;iL &amp;ndash; 中间代码，各种语言都可以编译成中间代码，然后再根据平台特性转化为最终代码&lt;/li&gt;&#xA;&lt;li&gt;mono虚拟机 &amp;ndash; 包含把C# 代码转化为iL 中间代码的工具，跨平台的运行.Net环境，支持JIT&lt;/li&gt;&#xA;&lt;li&gt;il2cpp &amp;ndash; 把C#代码转化为cpp代码，只支持AoT&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;想详细了解可以看这篇文章：&lt;a href=&#34;https://zhuanlan.zhihu.com/p/352463394&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;Mono和IL2CPP的区别&lt;/a&gt; 以及还有两个概念JIT跟AOT我推荐看这篇文章，说的非常好：&lt;a href=&#34;https://www.cnblogs.com/murongxiaopifu/p/4278947.html&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;谁偷了我的热更新？Mono，JIT，iOS&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;众所周知，unity的游戏使用C#写的，并不是cpp。但是unity之所以能实现跨平台，就是基于mono 跟 il2cpp 这两个工具。自从16年之后，il2cpp因为性能更好已经逐渐被大家采用，但是与此同时，il2cpp本身也有一定的性能安全问题，这也就让想要做逆向分析的人有了机会。&lt;/p&gt;&#xA;&lt;p&gt;我们想要dump出UnityAsset, 那么可以怎么办呢。下面再介绍两个工具：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://frida.re/&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;Frida&lt;/a&gt;  &amp;ndash; 一款很好用的远程调试工具&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/Perfare/Il2CppDumper&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;Il2cppDumper&lt;/a&gt;  &amp;ndash; 帮助我们把il2cpp转好的cpp符号再还原回来&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;这里C#转好的cpp函数在&lt;code&gt;UnityFramework.framework&lt;/code&gt;这个静态库下，我们对他做一下il2cppdump看看：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/7.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;可以看到dump出来的文件包含一个&lt;code&gt;dump.cs&lt;/code&gt; 以及 &lt;code&gt;DummyDll&lt;/code&gt;文件夹，&lt;code&gt;dump.cs&lt;/code&gt; 我们可以用VSCode打开，里面包含了原C#函数符号以及对应的地址。也可以通过ida打开 &lt;code&gt;Assembly-Csharp.i64&lt;/code&gt;这个文件，同样也是逆向好的符号。&#xA;虽然这样就拿到了源符号，但是这就像茫茫大海，应该从哪里入手？所以我们首先分析一下Unity加载资源的方法，Unity 是使用AssetBundle加载资源的，我首先去找了一下Unity的官方API，官网给出了一个加密Asset的方案：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/8.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;注意看上面红框里面的 &lt;code&gt;AssetBundle.loadFromMemory(decryptedBytes)&lt;/code&gt; 函数，看来这个&lt;code&gt;decryptedBytes&lt;/code&gt; 就是我们要寻找的目标了。再来看一下&lt;code&gt;dump.cs&lt;/code&gt;文件：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/9.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;Bingo！找到了目标函数，他的地址在 &lt;code&gt;0x16E3FB8&lt;/code&gt;，这下我们就可以去通过Frida开始着手去分析这个是否就是我们想要的目标了。&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;john-MB0&amp;ensp;~&amp;ensp;%&amp;ensp;frida-trace&amp;ensp;-U&amp;ensp;veve&amp;ensp;-a&amp;ensp;&amp;#34;UnityFramework\!0x16e3fb8&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;**Instrumenting...**&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;//&amp;ensp;Frida&amp;ensp;帮你生成了一个handler&amp;ensp;js&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sub_16e3fb8:&amp;ensp;Loaded&amp;ensp;handler&amp;ensp;at&amp;ensp;&amp;#34;/Users/john/__handlers__/UnityFramework/sub_16e3fb8.js&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;**Started&amp;ensp;tracing&amp;ensp;1&amp;ensp;function.&amp;ensp;Press&amp;ensp;Ctrl+C&amp;ensp;to&amp;ensp;stop.**&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;通过&lt;code&gt;frida-trace&amp;ensp;-a&lt;/code&gt; 可以追踪第三方库+对应偏移地址的函数，这个时候frida会自动生成一个jshandler, 我们可以通过这个这个文件去使用js注入我们的代码，这里我们想看一下这个decrypt函数是否是我们的目标，可以在 &lt;code&gt;onEnter()&lt;/code&gt;插入我们的dump代码：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;onEnter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;sub_16e3fb8()&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;[-]&amp;ensp;hook&amp;ensp;invoked&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;JSON&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stringify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;n&#34;&gt;a0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&amp;ensp;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;k&#34;&gt;var&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;dump&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;Memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;readByteArray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&amp;ensp;&lt;span class=&#34;mh&#34;&gt;0x100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;result:&amp;#34;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;hexdump&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dump&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;ensp;&amp;ensp;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;再看一下输出的结果：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/10.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;看来我们找对了方向，现在还剩下最后两个问题：&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;1-获取文件长度&#34;&gt;&lt;span&gt;1. 获取文件长度&lt;/span&gt;&#xA;  &lt;a href=&#34;#1-%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e9%95%bf%e5%ba%a6&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;跟有经验的同学请教，发现文件长度就在这几个字节，这是应该是这个格式的一种规范：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#39;https://www.yingxinsong.com/image/veve/11.png&#39; alt=&#34;enter image description here&#34;&gt;&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;2-dump文件&#34;&gt;&lt;span&gt;2. dump文件&lt;/span&gt;&#xA;  &lt;a href=&#34;#2-dump%e6%96%87%e4%bb%b6&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;这里我尝试了两种办法，第一种通过Frida创建dump文件，然后再使用爱思助手把文件拿出来。但是因为文件权限的问题一直写入失败。因为iOS机器已经越狱，并且使用了MonkeyDev ，所以我的另一个思路就是直接通过LLDB来把这个文件拿出来。&#xA;使用LLDB的思路就是通过设置一个断点，在&lt;code&gt;loadFromMemory(decryptedBytes)&lt;/code&gt;函数执行的时候，把x0地址对应的内存转换为NSData dump出来。&#xA;首先打一个符号端点：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;(lldb)&amp;ensp;br&amp;ensp;s&amp;ensp;-a&amp;ensp;0x107BC3FB8&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Breakpoint&amp;ensp;2:&amp;ensp;where&amp;ensp;=&amp;ensp;UnityFramework`___lldb_unnamed_symbol122084$$UnityFramework,&amp;ensp;address&amp;ensp;=&amp;ensp;0x0000000107bc3fb8&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后dump对应的文件：&lt;/p&gt;&#xA;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;po&lt;/span&gt;&amp;ensp;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSData&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;dataWithBytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000000139a25000&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x43563a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;writeToFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/mobile/Containers/Data/Application/5520D425-CA51-47FB-AF93-172E1C2258CB/Documents/veve.ab&amp;#34;&lt;/span&gt;&amp;ensp;&lt;span class=&#34;n&#34;&gt;atomically&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;YES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;到此我就拿到了&lt;code&gt;veve.ab&lt;/code&gt;这个Unity文件，成功。&lt;/p&gt;&#xA;</description>
    </item>
  </channel>
</rss>
